
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Карта автобусных маршрутов</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 10px;
            background-color: #f5f5f5;
        }
        .map-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            padding: 20px;
            max-width: 2000px;
            margin: 0 auto;
            overflow: auto;
        }
        h1 {
            text-align: center;
			font-size: calc(12px + 1vm);
            color: #333;
        }
        .time-display {
            text-align: center;
            font-size: calc(10px + 0.8vw);
            margin: 10px 0;
            font-weight: bold;
        }
        svg {
            display: block;
            margin: 0 auto;
        }
        .station {
            fill: white;
            stroke: #333;
            stroke-width: 2;
            cursor: pointer;
        }
        .station-text {
            font-size: 8px;
            pointer-events: none;
        }
        .bus {
            stroke: black;
            stroke-width: 1;
            transition: cx 0.4s, cy 0.4s;
        }
        .bus-text {
            font-size: 5px;
            fill: white;
            text-anchor: middle;
            dominant-baseline: middle;
            pointer-events: none;
            font-weight: bold;
            transition: cx 0.4s, cy 0.4s;
        }
        .tooltip {
            position: absolute;
            padding: 5px 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            max-width: 300px;
            white-space: nowrap;
            white-space: pre-line;
            line-height: 1.4;
            z-index: 101;
        }
        .connection-line, .connection-path {
            pointer-events: none;
        }
		.terminal-info {
			position: absolute;
			background: white;
			border-radius: 5px;
			padding: 8px;
			box-shadow: 0 0 5px rgba(0,0,0,0.3);
			font-size: calc(4px + 0.5vw);
			min-width: 150px;
			z-index: 100;
			max-width: 200px;
			transition: all 0.3s ease;
		}
        .terminal-title {
            font-weight: bold;
            margin-bottom: 5px;
            border-bottom: 1px solid #eee;
            padding-bottom: 3px;
        }
        .route-header {
            margin-top: 10px;
            font-size: 1.1em;
            border-bottom: 1px solid #ddd;
            padding-bottom: 3px;
        }

        .next-departure {
            margin: 5px 0;
            padding: 3px;
            margin-top: 3px;
        }

        .imminent-departure {
            background-color: #fffacd;
            font-weight: bold;
            border-radius: 3px;
        }

        /* Стили для модального окна расписания */
        .schedule-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 1000;
            overflow: auto;
        }

        .schedule-content {
            background-color: white;
            margin: 50px auto;
            padding: 20px;
            border-radius: 8px;
            min-width: 50vw;
			max-width: 80vw;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
            max-height: 80vh;
            overflow: auto;
        }
		.schedule-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			background: #f8f9fa;
			border-bottom: 1px solid #dee2e6;
			position: sticky;
			top: -20px;
			z-index: 100;
        }

		.schedule-scroll-container {
			width: 100%;
			height: 70vh;
			overflow: auto;
			cursor: grab;
			position: relative;
			-webkit-overflow-scrolling: touch;
		}
		.schedule-scroll-container.grabbing,
		.schedule-scroll-container:active {
			cursor: grabbing;
		}
		.schedule-scroll-container:focus {
			outline: none;
		}
		
        .schedule-title {
            font-size: 1.5em;
            font-weight: bold;
        }

/* Таблица - никогда не показывает скролл */
		.schedule-table {
			overflow: visible !important;
			width: max-content;
			min-width: 100%;
		}

		.schedule-table th, .schedule-table td {
			border: 1px solid #ddd;
			padding: 8px;
			text-align: center;
			min-width: 50px;
		}

		.schedule-table th {
			position: sticky;
			top: 0;
			background: #f5f5f5;
			z-index: 40;
			box-shadow: 0 2px 5px rgba(0,0,0,0.1);
		}
		.schedule-table.full-route td:first-child,
		.schedule-table.full-route th:first-child {
			position: sticky !important;
			left: 0;
			background: #fff;
			z-index: 30;
			box-shadow: 2px 0 5px rgba(0,0,0,0.1);
			min-width: 150px;
		}

		.schedule-table.full-route th:first-child {
			z-index: 50 !important;
			top: 30;
		}
		.schedule-table tr:nth-child(even) {
			background-color: #f9f9f9;
		}
		.past-time {
            color: #999;
        }

        .next-time {
            background-color: #fffacd !important;
            font-weight: bold;
        }
		/*===заголовок расписания 2==*/
		
		.schedule-head {
			background: #f8f9fa;
			border-bottom: 1px solid #dee2e6;
			position: sticky;
			top: 7px;
			z-index: 100;
			width: 100%;
			padding: 0;
			margin: 0;
			box-sizing: border-box;
		}

		.header-content {

			display: grid;
			grid-template-columns: 1fr auto;
			align-items: center;
			padding: 0 10% 0 30%;
			margin: 0 auto;
			max-width: 100%;
		}

		.route-title {
			position: sticky;
			top: 0px;
			margin: 0;
			font-size: 18px;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			text-align: left;
			grid-column: 1;
		}

		.back-button {
			background: none;
			border: none;
			cursor: pointer;
			font-size: 16px;
			color: #0d6efd;
			padding: 5px;
			white-space: nowrap;
			grid-column: 2;
		}
		.fixed-cell.highlighted-stop {
			color: #0d6efd;
			font-weight: bold;
			border-left: 3px solid #0d6efd;
		
		}

		/*==*/
		.back-button:hover {
			background-color: #6a6aee;
			text-decoration: underline;
		}

		.schedule-table td.next-time {
			background-color: #fffacd;
			font-weight: bold;
		}

		.schedule-table td.past-time {
			color: #999;
		}

        .route-name {
            font-weight: bold;
            color: #333;
        }
		.schedule-switcher {
			display: flex;
			gap: 10px;
			margin: 0;
		}
		.schedule-switch-btn {
			//flex: 1;
			padding: 5px 10px;
			border: none;
			background: #f0f0f0;
			cursor: pointer;
			font-weight: bold;
			border-radius: 4px;
		}
		.close-schedule-btn {
			background: none;
			border: none;
			cursor: pointer;
			font-size: 1.2em;
			margin-left: 10px;
		}
        .schedule-switch-btn.active {
            background: #7a7aff;
            color: white;
        }
        .schedule-view {
            display: none;
        }
        .schedule-view.active {
            display: block;
        }
        
        /* Стили для конкретных терминалов */
        .terminal-info.МЦД_Отдых {
            background-color: #f0f8ff;
			transform: translate( -120%, -150%);

        }
        .terminal-info.Городок_Тимонино {
            background-color: #f0fff0;
			transform: translate( -50%, 50%);
        }
        .terminal-info.Москворечье {
            background-color: #f0f8ff;
			transform: translate( 0%,-115%);
        }
        .terminal-info.Горка {
            background-color: #fff0f0;
			transform: translate( -10%,100%);

        }
        .terminal-info.Автостанция_Бронницы {
            background-color: #fff0f0;
			transform: translate(calc(-100%),calc(-100% - (150px - 1vw)));
        }
        .terminal-info.Метро_Котельники {
            background-color: #f0fff0;
			transform: translate(-50%, -150%);
        }
		/* Медиа-запросы для разных размеров */
		@media (max-width: 1200px) {
			h1 {
				font-size: calc(11px + 1.5vw);
			}
			.terminal-info {
				font-size: calc(4px + 0.5vw);
				min-width: 130px;
			}
			.terminal-info.Автостанция_Бронницы {
				background-color: #fff0f0;
				transform: translate(-100%,calc(-100% - 120px));
			}
			.terminal-info.МЦД_Отдых {
				transform: translate( -100%, calc(-100% - 80px));
			}
			.terminal-info.Метро_Котельники {
				transform: translate(-50%,-110%);
			}
		}

		@media (max-width: 799px) {
			h1 {
			font-size: calc(10px + 1.5vw);
			}
			.terminal-info {
				font-size: 7px;
				min-width: 120px;
				padding: 5px;
			}
			.terminal-info.Москворечье {
				transform: translate( -20%,-115%);
			}
			.terminal-info.Автостанция_Бронницы {
				transform: translate(-120%,calc(-100% - 120px));
			}
			.terminal-info.МЦД_Отдых {
				transform: translate(-50%, calc(-100% - 60px));
			}
			.schedule-modal {
				font-size: 0.8em;
			}
			
		@media (max-width: 600px) {
		    h1 {
				text-align: left;
				font-size: calc(10px + 1.5vw);
			}
			.time-display {
				text-align: left;
				font-size: calc(10px + 0.8vw);
			}
			.terminal-info {
				font-size: 7px;
				min-width: 120px;
				padding: 5px;
			}
			.terminal-info.Москворечье {
				transform: translate( 11%,-110%);
			}
			.terminal-info.Автостанция_Бронницы {
				transform: translate(-110%, calc(40px + 1.5vw));
			}
			.terminal-info.МЦД_Отдых {
				transform: translate(-50%, calc(-100% - (50px - 0.3vw)));
			}

			.terminal-info.Городок_Тимонино {
				transform: translate( -81%, -120%);
			}
			.terminal-info.Горка {
				transform: translate( 0%,10%);

			}
			.terminal-info.Метро_Котельники {
			transform: translate( 20px,-50%);
			
			}
			.schedule-modal {
				font-size: 0.8em;
			}
		@media (max-width: 320px) {
			.schedule-table tr > td:first-child,
			.schedule-table th:first-child {
				width: 70px !important;
				min-width: 70px !important;
				white-space: normal !important;
				word-break: break-word !important;
			}
			.schedule-table th, .schedule-table td {
				border: 1px solid #ddd;
				padding: 3px;
				text-align: center;
				min-width: 30px;
			}
			.schedule-switch-btn {
				font-size: 0.6em;
				padding: 5px;
			}
			.schedule-header {
				font-size: 0.6em;
			}
			.schedule-table {
				font-size: 0.5em;
			}
			.header-content {
				display: grid;
				grid-template-columns: 1fr auto;
				align-items: center;
				padding: 0 0 0 0;
				margin: 0 auto;
				max-width: 100%;
			}
			.route-title {
				margin: 0;
				font-size: 0.6em;
				text-overflow: ellipsis;
				text-align: left;
			}
			.back-button {
				font-size: 0.6em;
				padding: 5px;
			}
			.route-name {
			font-size: 0.8em;
			}
			.tooltip {
				color: white;
				border-radius: 4px;
				font-size: 7px;
				pointer-events: none;
				opacity: 0;
				transition: opacity 0.3s;
				max-width: 300px;
				white-space: nowrap;
				white-space: pre-line;
				line-height: 1.4;
				z-index: 101;
			}
		    h1 {
				text-align: right;
				font-size: 8px;
			}
			.time-display {
				text-align: right;
				font-size: 7px;
			}
			.terminal-info {
				font-size: 5px;
				min-width: 60px;
				max-width: 100px;
				line-height: 1;
			}
			.terminal-info .next-departure {
				margin-bottom: 2px; /* Отступ снизу для каждого блока */
				padding: 1px 0;     /* Отступ сверху/снизу внутри блока */
			}
			.terminal-info.Москворечье {
				transform: translate( 11%,-110%);
			}
			.terminal-info.Автостанция_Бронницы {
				transform: translate(-110%, 25px);
			}
			.terminal-info.МЦД_Отдых {
				transform: translate(-50%, calc(-100% - (50px - 0.3vw)));
			}

			.terminal-info.Городок_Тимонино {
				transform: translate( -81%, -120%);
			}
			.terminal-info.Горка {
				transform: translate( 0%,10%);

			}
			.terminal-info.Метро_Котельники {
			position: absolute;
			transform: translate( 0%, 0%);
			top: 10px !important;
			left: 10px !important;
			
			}
			.schedule-modal {
				font-size: 0.8em;
			}


    </style>
</head>
<body>
    <div class="map-container">
        <h1>Карта автобусных маршрутов</h1>
        
        <div class="time-display">Текущее время: <span id="currentTime"></span></div>
        
        <svg id="busMap" xmlns="http://www.w3.org/2000/svg">
            <!-- Станции будут добавлены через JavaScript -->
        </svg>
    </div>

    <div class="tooltip" id="tooltip"></div>
    
    <!-- Модальное окно расписания -->
    <div class="schedule-modal" id="scheduleModal">
        <div class="schedule-content">
            <div id="scheduleData"></div>
        </div>
    </div>


<script>
      const appData = {
        stations: [
            {name: "Москворечье", x: 976, y: 386, r: 6, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "Горка", x: 997, y: 410, r: 6, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Новые дома.", x: 976, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Автостанция Бронницы", x: 956, y: 410, r: 7, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Хозяйственный магазин", x: 936, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Совхоз Бронницкий", x: 916, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Военная часть № 63539", x: 896, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Нижнее Велино", x: 875, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Верхнее Велино", x: 855, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Кривцы-1", x: 835, y: 410, r: 5, rot: -60, dx: 20, dy: 2, ta: 'start'},
            {name: "Кривцы-2", x: 815, y: 410, r: 5, rot: -60, dx: 20, dy: 2, ta: 'start'},
            {name: "Тимонино", x: 795, y: 410, r: 5, rot: -60, dx: 20, dy: 2, ta: 'start'},
            {name: "Тимонино - Баня", x: 774, y: 410, r: 5, rot: -60, dx: 20, dy: 2, ta: 'start'},
            {name: "Софьино", x: 754, y: 410, r: 5, rot: -60, dx: 20, dy: 2, ta: 'start'},
            {name: "Становое-1", x: 734, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Становое-2", x: 713, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Ивановка", x: 693, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Дурниха", x: 673, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Михайловская Слобода", x: 653, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Совхоз имени Тельмана", x: 633, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Чулково-1", x: 612, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Чулково-2", x: 592, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Новые дома", x: 572, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Заозёрье", x: 551, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Сельцо", x: 531, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Островцы-1", x: 511, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Островцы-2", x: 491, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Островцы-3", x: 470, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Тепличный комбинат", x: 450, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Октябрьский", x: 430, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Текстиль-Профи", x: 409, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Красное знамя", x: 388, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Кладбище", x: 369, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Мирный", x: 349, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Птицефабрика Мирная", x: 328, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Строймаркет", x: 308, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Новолюберецкое кладбище", x: 288, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "АТК-19", x: 268, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Карьер", x: 248, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Карьер-2", x: 227, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "ТЦ Реал", x: 207, y: 410, r: 5, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Метро Котельники", x: 186, y: 410, r: 7, rot: -60, dx: -22, dy: 2, ta: 'end'},
            {name: "Улица Туполева", x: 571, y: 361, r: 5, rot: -30, dx: 20, dy: 2, ta: 'start'},
            {name: "Площадь Громова", x: 571, y: 337, r: 5, rot: -30, dx: -8, dy: 2, ta: 'end'},
            {name: "Улица Амет-хан Султана", x: 551, y: 337, r: 5, rot: -30, dx: -8, dy: 2, ta: 'end'},
            {name: "Улица Чкалова", x: 531, y: 337, r: 5, rot: -30, dx: -8, dy: 2, ta: 'end'},
            {name: "Улица Пушкина", x: 511, y: 336, r: 5, rot: -30, dx: -8, dy: 2, ta: 'end'},
            {name: "Улица Горького", x: 491, y: 336, r: 5, rot: -30, dx: -8, dy: 2, ta: 'end'},
            {name: "Больница", x: 471, y: 336, r: 5, rot: -30, dx: -8, dy: 2, ta: 'end'},
            {name: "Улица Жуковского", x: 451, y: 336, r: 5, rot: -30, dx: -8, dy: 2, ta: 'end'},
            {name: "Школа № 8", x: 451, y: 308, r: 5, rot: -60, dx: 20, dy: 2, ta: 'start'},
            {name: "Улица Семашко", x: 511, y: 308, r: 5, rot: -60, dx: 20, dy: 2, ta: 'start'},
            {name: "МЦД Отдых", x: 481, y: 308, r: 7, rot: -60, dx: 25, dy: 2, ta: 'start'},
            {name: "Городок Тимонино", x: 735, y: 449, r: 7, rot: 0, dx: 10, dy: 20, ta: 'middle'},
            {name: "Бритово-1", x: 754, y: 449, r: 5, rot: 0, dx: 12, dy: 2, ta: 'start'},
            {name: "Бритово", x: 754, y: 430, r: 5, rot: 0, dx: 12, dy: 2, ta: 'start'},
            {name: "РЦ Перекрёсток", x: 754, y: 386, r: 5, rot: -60, dx: 20, dy: 2, ta: 'start'},
            {name: "Софьино, 16", x: 754, y: 362, r: 5, rot: -60, dx: 20, dy: 2, ta: 'start'},
            {name: "Магазин", x: 754, y: 338, r: 5, rot: -60, dx: 20, dy: 2, ta: 'start'},
            {name: "Шаровка", x: 733, y: 338, r: 5, rot: -60, dx: 20, dy: 2, ta: 'start'},
            {name: "Паткино, 55", x: 713, y: 338, r: 5, rot: -60, dx: 20, dy: 2, ta: 'start'},
            {name: "Шилово, 24", x: 692, y: 338, r: 5, rot: -60, dx: 20, dy: 2, ta: 'start'},
            {name: "Дурниха, 58А", x: 671, y: 338, r: 5, rot: -60, dx: 20, dy: 2, ta: 'start'},
            {name: "Поворот", x: 661, y: 362, r: 5, rot: 0, dx: -12, dy: 2, ta: 'end'},
            {name: "Дачный массив", x: 653, y: 386, r: 5, rot: 0, dx: -12, dy: 2, ta: 'end'}
        ],
		mobileStations: [
            {name: "Москворечье", x: 243, y: 761, r: 6, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "Горка", x: 205, y: 780, r: 6, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Новые дома.", x: 205, y: 761, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Автостанция Бронницы", x: 205, y: 742, r: 7, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Хозяйственный магазин", x: 205, y: 724, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Совхоз Бронницкий", x: 205, y: 705, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Военная часть № 63539", x: 205, y: 686, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Нижнее Велино", x: 205, y: 667, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Верхнее Велино", x: 205, y: 648, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Кривцы-1", x: 205, y: 630, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Кривцы-2", x: 205, y: 611, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Тимонино", x: 205, y: 592, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Тимонино - Баня", x: 205, y: 573, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Софьино", x: 205, y: 554, r: 5, rot: 20, dx: 15, dy: 2, ta: 'start'},
            {name: "Становое-1", x: 205, y: 535, r: 5, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "Становое-2", x: 205, y: 517, r: 5, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "Ивановка", x: 205, y: 498, r: 5, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "Дурниха", x: 205, y: 479, r: 5, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "Михайловская Слобода", x: 205, y: 460, r: 5, rot: 0, dx: 0, dy: 8, ta: 'middle'},
            {name: "Совхоз имени Тельмана", x: 205, y: 441, r: 5, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "Чулково-1", x: 205, y: 423, r: 5, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "Чулково-2", x: 205, y: 404, r: 5, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "Новые дома", x: 205, y: 385, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Заозёрье", x: 205, y: 366, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Сельцо", x: 205, y: 347, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Островцы-1", x: 205, y: 329, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Островцы-2", x: 205, y: 310, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Островцы-3", x: 205, y: 291, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Тепличный комбинат", x: 205, y: 272, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Октябрьский", x: 205, y: 253, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Текстиль-Профи", x: 205, y: 235, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Красное знамя", x: 205, y: 216, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Кладбище", x: 205, y: 197, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Мирный", x: 205, y: 178, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Птицефабрика Мирная", x: 205, y: 159, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Строймаркет", x: 205, y: 140, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Новолюберецкое кладбище", x: 205, y: 122, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "АТК-19", x: 205, y: 103, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Карьер", x: 205, y: 84, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Карьер-2", x: 205, y: 65, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "ТЦ Реал", x: 205, y: 46, r: 5, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Метро Котельники", x: 205, y: 25, r: 7, rot: 0, dx: -22, dy: 2, ta: 'end'},
            {name: "Улица Туполева", x: 282, y: 385, r: 5, rot: 0, dx: 0, dy: 15, ta: 'middle'},
            {name: "Площадь Громова", x: 320, y: 385, r: 5, rot: 0, dx: 15, dy: 2, ta: 'start'},
            {name: "Улица Амет-хан Султана", x: 320, y: 366, r: 5, rot: 0, dx: 15, dy: 2, ta: 'start'},
            {name: "Улица Чкалова", x: 320, y: 348, r: 5, rot: 0, dx: -8, dy: 2, ta: 'end'},
            {name: "Улица Пушкина", x: 320, y: 329, r: 5, rot: 0, dx: -8, dy: 2, ta: 'end'},
            {name: "Улица Горького", x: 320, y: 310, r: 5, rot: 0, dx: -8, dy: 2, ta: 'end'},
            {name: "Больница", x: 320, y: 292, r: 5, rot: 0, dx: -8, dy: 2, ta: 'end'},
            {name: "Улица Жуковского", x: 320, y: 273, r: 5, rot: 0, dx: -8, dy: 2, ta: 'end'},
            {name: "Школа № 8", x: 365, y: 273, r: 5, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "Улица Семашко", x: 365, y: 329, r: 5, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "МЦД Отдых", x: 365, y: 301, r: 7, rot: 0, dx: 25, dy: 2, ta: 'start'},
            {name: "Городок Тимонино", x: 144, y: 536, r: 7, rot: 0, dx: -20, dy: 2, ta: 'end'},
            {name: "Бритово-1", x: 144, y: 554, r: 5, rot: 0, dx: -20, dy: 2, ta: 'end'},
            {name: "Бритово", x: 174, y: 554, r: 5, rot: 0, dx: 0, dy: -5, ta: 'middle'},
            {name: "РЦ Перекрёсток", x: 243, y: 554, r: 5, rot: 0, dx: 0, dy: -8, ta: 'middle'},
            {name: "Софьино, 16", x: 281, y: 554, r: 5, rot: 0, dx: 0, dy: 8, ta: 'middle'},
            {name: "Магазин", x: 318, y: 554, r: 5, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "Шаровка", x: 318, y: 535, r: 5, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "Паткино, 55", x: 318, y: 515, r: 5, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "Шилово, 24", x: 318, y: 493, r: 5, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "Дурниха, 58А", x: 318, y: 478, r: 5, rot: 0, dx: 20, dy: 2, ta: 'start'},
            {name: "Поворот", x: 281, y: 469, r: 5, rot: 0, dx: 10, dy: -5, ta: 'start'},
            {name: "Дачный массив", x: 243, y: 460, r: 5, rot: 0, dx: 10, dy: -5, ta: 'start'}
        ],
				connections: [
			{
				stations: ['Новые дома.', 'Метро Котельники'],
				color: "#7a7aff", // 324
				width: 2,
				offset: 0,
				dasharray: ""
			},{
				stations: ['Москворечье', 'Новые дома.', 'Горка'],
				color: "#7a7aff", // 324
				width: 2,
				offset: 0,
				dasharray: ""
			},
			{
				stations: ['Москворечье', 'Новые дома.', "Автостанция Бронницы", 'Хозяйственный магазин', 'Совхоз Бронницкий', 'Военная часть № 63539', 'Нижнее Велино', 'Верхнее Велино', 'Кривцы-1', 'Кривцы-2', 'Тимонино', 'Тимонино - Баня', "Софьино", "РЦ Перекрёсток", 'Софьино, 16', "Магазин", "Шаровка", "Дурниха, 58А", "Поворот", "Дачный массив", "Михайловская Слобода", "Совхоз имени Тельмана", "Чулково-1", "Чулково-2", "Новые дома", 'Заозёрье', 'Сельцо', 'Островцы-1', 'Островцы-2', 'Островцы-3', 'Тепличный комбинат', 'Октябрьский', 'Текстиль-Профи', 'Красное знамя', 'Мирный', 'Птицефабрика Мирная', 'Карьер', 'ТЦ Реал', 'Метро Котельники'],
				color: "#0000FF", // 324С
				width: 2,
				offset: 2,
				dasharray: ""
			},{
				stations: ["Автостанция Бронницы", 'Хозяйственный магазин', 'Совхоз Бронницкий', 'Военная часть № 63539', 'Нижнее Велино', 'Верхнее Велино', 'Кривцы-1', 'Кривцы-2', 'Тимонино', 'Тимонино - Баня', "Софьино", "РЦ Перекрёсток", 'Софьино, 16', "Магазин", "Шаровка", "Дурниха, 58А", "Поворот", "Дачный массив", "Михайловская Слобода", ],
				color: "#1fe037", // 414
				width: 3,
				offset: -3,
				dasharray: ""
			},{
				stations: [ "Михайловская Слобода", "Совхоз имени Тельмана", "Чулково-1", "Чулково-2", "Новые дома"],
				color: "#1fe037", // 414
				width: 3,
				offset: -5,
				dasharray: ""
			},{
				stations: ["Новые дома", "Улица Туполева", "Площадь Громова", "Улица Амет-хан Султана", "Улица Чкалова", "Улица Пушкина", "Улица Семашко", "МЦД Отдых", "Школа № 8", "Улица Жуковского", "Больница", "Улица Горького", "Улица Пушкина"],
				color: "#1fe037", // 414
				width: 3,
				offset: 0,
				dasharray: ""
			},{
				stations: ['Городок Тимонино', 'Бритово-1', 'Бритово', 'Софьино, 16', "Магазин", "Шаровка", "Дурниха, 58А", "Поворот", "Дачный массив", "Михайловская Слобода"],
				color: "#800080", // 558к
				width: 3,
				offset: 0,
				dasharray: ""
			},{
				stations: ["Михайловская Слобода", "Совхоз имени Тельмана", "Чулково-1", "Чулково-2", "Новые дома", 'Заозёрье', 'Сельцо', 'Островцы-1', 'Островцы-2', 'Островцы-3', 'Тепличный комбинат', 'Октябрьский', 'Текстиль-Профи', 'Красное знамя', 'Кладбище', 'Мирный', 'Птицефабрика Мирная', 'Строймаркет', 'Новолюберецкое кладбище', 'АТК-19', 'Карьер', 'Карьер-2', 'ТЦ Реал', 'Метро Котельники'],
				color: "#800080", // 558к
				width: 2,
				offset: -2,
				dasharray: ""
			}
			/*{
				from: "Метро Котельники",
				to: "ТЦ Реал",
				color: "#cccccc",
				width: 2,
				offset: 0
			}*/
		],
        
        routes: {
            '324': {
                color: '#7a7aff',
                variants: [
                    {
                        name: "до Горка",
						oppositeVariant: null,
						schedule: [
							{station: 'Метро Котельники', times: ['18:30', '19:00', '21:15', '22:15']},
							{station: 'ТЦ Реал', times: ['18:31', '19:01', '21:16', '22:16']},
							{station: 'Карьер', times: ['18:35', '19:05', '21:20', '22:20']},
							{station: 'Птицефабрика Мирная', times: ['18:42', '19:12', '21:27', '22:27']},
							{station: 'Мирный', times: ['18:43', '19:13', '21:28', '22:28']},
							{station: 'Красное знамя', times: ['18:45', '19:15', '21:30', '22:30']},
							{station: 'Текстиль-Профи', times: ['18:46', '19:16', '21:31', '22:31']},
							{station: 'Октябрьский', times: ['18:47', '19:17', '21:32', '22:32']},
							{station: 'Тепличный комбинат', times: ['18:49', '19:19', '21:34', '22:34']},
							{station: 'Островцы-3', times: ['18:50', '19:20', '21:35', '22:35']},
							{station: 'Островцы-2', times: ['18:52', '19:22', '21:37', '22:37']},
							{station: 'Островцы-1', times: ['18:53', '19:23', '21:38', '22:38']},
							{station: 'Сельцо', times: ['18:56', '19:26', '21:41', '22:41']},
							{station: 'Заозёрье', times: ['18:57', '19:27', '21:42', '22:42']},
							{station: 'Новые дома', times: ['18:59', '19:29', '21:44', '22:44']},
							{station: 'Чулково-2', times: ['19:00', '19:30', '21:45', '22:45']},
							{station: 'Чулково-1', times: ['19:02', '19:32', '21:47', '22:47']},
							{station: 'Совхоз имени Тельмана', times: ['19:03', '19:33', '21:48', '22:48']},
							{station: 'Михайловская Слобода', times: ['19:05', '19:35', '21:50', '22:50']},
							{station: 'Дурниха', times: ['19:09', '19:39', '21:54', '22:54']},
							{station: 'Ивановка', times: ['19:12', '19:42', '21:57', '22:57']},
							{station: 'Становое-2', times: ['19:16', '19:46', '22:01', '23:01']},
							{station: 'Становое-1', times: ['19:18', '19:48', '22:03', '23:03']},
							{station: 'Софьино', times: ['19:21', '19:51', '22:06', '23:06']},
							{station: 'Тимонино - Баня', times: ['19:25', '19:55', '22:10', '23:10']},
							{station: 'Тимонино', times: ['19:27', '19:57', '22:12', '23:12']},
							{station: 'Кривцы-2', times: ['19:28', '19:58', '22:13', '23:13']},
							{station: 'Кривцы-1', times: ['19:30', '20:00', '22:15', '23:15']},
							{station: 'Верхнее Велино', times: ['19:33', '20:03', '22:18', '23:18']},
							{station: 'Нижнее Велино', times: ['19:35', '20:05', '22:20', '23:20']},
							{station: 'Военная часть № 63539', times: ['19:37', '20:07', '22:22', '23:22']},
							{station: 'Совхоз Бронницкий', times: ['19:39', '20:09', '22:24', '23:24']},
							{station: 'Хозяйственный магазин', times: ['19:40', '20:10', '22:25', '23:25']},
							{station: 'Автостанция Бронницы', times: ['19:43', '20:13', '22:28', '23:28']},
							{station: 'Новые дома.', times: ['19:46', '20:16', '22:31', '23:31']},
							{station: 'Горка', times: ['19:53', '20:23', '22:38', '23:38']}
						]
                    },
					{
                        name: "до М.Котельники",
						oppositeVariant: 2,
						schedule: [
							{station: 'Москворечье', times: ['04:40', '05:15', '05:30', '05:55', '06:20', '06:40', '06:55', '07:15', '07:30', '07:45', '08:05', '08:40', '09:00', '09:15', '09:30', '09:45', '10:00', '10:20', '10:40', '11:00', '11:15', '11:30', '11:45', '12:00', '12:15', '12:30', '12:45', '13:00', '13:15', '13:30', '13:45', '14:00', '14:20', '14:40', '15:00', '15:15', '15:30', '15:45', '16:00', '16:15', '16:30', '16:45', '16:55', '17:35', '17:50', '18:00', '18:15', '18:35', '19:00', '19:20', '19:40', '20:00', '20:20', '20:45', '21:15', '21:55', '22:50']},
							{station: 'Новые дома.', times: ['04:42', '05:17', '05:32', '05:57', '06:22', '06:42', '06:57', '07:17', '07:32', '07:47', '08:07', '08:42', '09:02', '09:17', '09:32', '09:47', '10:02', '10:22', '10:42', '11:02', '11:17', '11:32', '11:47', '12:02', '12:17', '12:32', '12:47', '13:02', '13:17', '13:32', '13:47', '14:02', '14:22', '14:42', '15:02', '15:17', '15:32', '15:47', '16:02', '16:17', '16:32', '16:47', '16:57', '17:37', '17:52', '18:02', '18:17', '18:37', '19:02', '19:22', '19:42', '20:02', '20:22', '20:47', '21:17', '21:57', '22:52']},
							{station: 'Автостанция Бронницы', times: ['04:49', '05:24', '05:39', '06:04', '06:29', '06:49', '07:04', '07:24', '07:39', '07:54', '08:14', '08:49', '09:09', '09:24', '09:39', '09:54', '10:09', '10:29', '10:49', '11:09', '11:24', '11:39', '11:54', '12:09', '12:24', '12:39', '12:54', '13:09', '13:24', '13:39', '13:54', '14:09', '14:29', '14:49', '15:09', '15:24', '15:39', '15:54', '16:09', '16:24', '16:39', '16:54', '17:04', '17:44', '17:59', '18:09', '18:24', '18:44', '19:09', '19:29', '19:49', '20:09', '20:29', '20:54', '21:24', '22:04', '22:59']},
							{station: 'Хозяйственный магазин', times: ['04:52', '05:27', '05:42', '06:07', '06:32', '06:52', '07:07', '07:27', '07:42', '07:57', '08:17', '08:52', '09:12', '09:27', '09:42', '09:57', '10:12', '10:32', '10:52', '11:12', '11:27', '11:42', '11:57', '12:12', '12:27', '12:42', '12:57', '13:12', '13:27', '13:42', '13:57', '14:12', '14:32', '14:52', '15:12', '15:27', '15:42', '15:57', '16:12', '16:27', '16:42', '16:57', '17:07', '17:47', '18:02', '18:12', '18:27', '18:47', '19:12', '19:32', '19:52', '20:12', '20:32', '20:57', '21:27', '22:07', '23:02']},
							{station: 'Совхоз Бронницкий', times: ['04:54', '05:29', '05:44', '06:09', '06:34', '06:54', '07:09', '07:29', '07:44', '07:59', '08:19', '08:54', '09:14', '09:29', '09:44', '09:59', '10:14', '10:34', '10:54', '11:14', '11:29', '11:44', '11:59', '12:14', '12:29', '12:44', '12:59', '13:14', '13:29', '13:44', '13:59', '14:14', '14:34', '14:54', '15:14', '15:29', '15:44', '15:59', '16:14', '16:29', '16:44', '16:59', '17:09', '17:49', '18:04', '18:14', '18:29', '18:49', '19:14', '19:34', '19:54', '20:14', '20:34', '20:59', '21:29', '22:09', '23:04']},
							{station: 'Военная часть № 63539', times: ['04:56', '05:31', '05:46', '06:11', '06:36', '06:56', '07:11', '07:31', '07:46', '08:01', '08:21', '08:56', '09:16', '09:31', '09:46', '10:01', '10:16', '10:36', '10:56', '11:16', '11:31', '11:46', '12:01', '12:16', '12:31', '12:46', '13:01', '13:16', '13:31', '13:46', '14:01', '14:16', '14:36', '14:56', '15:16', '15:31', '15:46', '16:01', '16:16', '16:31', '16:46', '17:01', '17:11', '17:51', '18:06', '18:16', '18:31', '18:51', '19:16', '19:36', '19:56', '20:16', '20:36', '21:01', '21:31', '22:11', '23:06']},
							{station: 'Нижнее Велино', times: ['04:57', '05:32', '05:47', '06:12', '06:37', '06:57', '07:12', '07:32', '07:47', '08:02', '08:22', '08:57', '09:17', '09:32', '09:47', '10:02', '10:17', '10:37', '10:57', '11:17', '11:32', '11:47', '12:02', '12:17', '12:32', '12:47', '13:02', '13:17', '13:32', '13:47', '14:02', '14:17', '14:37', '14:57', '15:17', '15:32', '15:47', '16:02', '16:17', '16:32', '16:47', '17:02', '17:12', '17:52', '18:07', '18:17', '18:32', '18:52', '19:17', '19:37', '19:57', '20:17', '20:37', '21:02', '21:32', '22:12', '23:07']},
							{station: 'Верхнее Велино', times: ['05:00', '05:35', '05:50', '06:15', '06:40', '07:00', '07:15', '07:35', '07:50', '08:05', '08:25', '09:00', '09:20', '09:35', '09:50', '10:05', '10:20', '10:40', '11:00', '11:20', '11:35', '11:50', '12:05', '12:20', '12:35', '12:50', '13:05', '13:20', '13:35', '13:50', '14:05', '14:20', '14:40', '15:00', '15:20', '15:35', '15:50', '16:05', '16:20', '16:35', '16:50', '17:05', '17:15', '17:55', '18:10', '18:20', '18:35', '18:55', '19:20', '19:40', '20:00', '20:20', '20:40', '21:05', '21:35', '22:15', '23:10']},
							{station: 'Кривцы-1', times: ['05:02', '05:37', '05:52', '06:17', '06:42', '07:02', '07:17', '07:37', '07:52', '08:07', '08:27', '09:02', '09:22', '09:37', '09:52', '10:07', '10:22', '10:42', '11:02', '11:22', '11:37', '11:52', '12:07', '12:22', '12:37', '12:52', '13:07', '13:22', '13:37', '13:52', '14:07', '14:22', '14:42', '15:02', '15:22', '15:37', '15:52', '16:07', '16:22', '16:37', '16:52', '17:07', '17:17', '17:57', '18:12', '18:22', '18:37', '18:57', '19:22', '19:42', '20:02', '20:22', '20:42', '21:07', '21:37', '22:17', '23:12']},
							{station: 'Кривцы-2', times: ['05:03', '05:38', '05:53', '06:18', '06:43', '07:03', '07:18', '07:38', '07:53', '08:08', '08:28', '09:03', '09:23', '09:38', '09:53', '10:08', '10:23', '10:43', '11:03', '11:23', '11:38', '11:53', '12:08', '12:23', '12:38', '12:53', '13:08', '13:23', '13:38', '13:53', '14:08', '14:23', '14:43', '15:03', '15:23', '15:38', '15:53', '16:08', '16:23', '16:38', '16:53', '17:08', '17:18', '17:58', '18:13', '18:23', '18:38', '18:58', '19:23', '19:43', '20:03', '20:23', '20:43', '21:08', '21:38', '22:18', '23:13']},
							{station: 'Тимонино', times: ['05:05', '05:40', '05:55', '06:20', '06:45', '07:05', '07:20', '07:40', '07:55', '08:10', '08:30', '09:05', '09:25', '09:40', '09:55', '10:10', '10:25', '10:45', '11:05', '11:25', '11:40', '11:55', '12:10', '12:25', '12:40', '12:55', '13:10', '13:25', '13:40', '13:55', '14:10', '14:25', '14:45', '15:05', '15:25', '15:40', '15:55', '16:10', '16:25', '16:40', '16:55', '17:10', '17:20', '18:00', '18:15', '18:25', '18:40', '19:00', '19:25', '19:45', '20:05', '20:25', '20:45', '21:10', '21:40', '22:20', '23:15']},
							{station: 'Тимонино - Баня', times: ['05:07', '05:42', '05:57', '06:22', '06:47', '07:07', '07:22', '07:42', '07:57', '08:12', '08:32', '09:07', '09:27', '09:42', '09:57', '10:12', '10:27', '10:47', '11:07', '11:27', '11:42', '11:57', '12:12', '12:27', '12:42', '12:57', '13:12', '13:27', '13:42', '13:57', '14:12', '14:27', '14:47', '15:07', '15:27', '15:42', '15:57', '16:12', '16:27', '16:42', '16:57', '17:12', '17:22', '18:02', '18:17', '18:27', '18:42', '19:02', '19:27', '19:47', '20:07', '20:27', '20:47', '21:12', '21:42', '22:22', '23:17']},
							{station: 'Софьино', times: ['05:09', '05:44', '05:59', '06:24', '06:49', '07:09', '07:24', '07:44', '07:59', '08:14', '08:34', '09:09', '09:29', '09:44', '09:59', '10:14', '10:29', '10:49', '11:09', '11:29', '11:44', '11:59', '12:14', '12:29', '12:44', '12:59', '13:14', '13:29', '13:44', '13:59', '14:14', '14:29', '14:49', '15:09', '15:29', '15:44', '15:59', '16:14', '16:29', '16:44', '16:59', '17:14', '17:24', '18:04', '18:19', '18:29', '18:44', '19:04', '19:29', '19:49', '20:09', '20:29', '20:49', '21:14', '21:44', '22:24', '23:19']},
							{station: 'Становое-1', times: ['05:11', '05:46', '06:01', '06:26', '06:51', '07:11', '07:26', '07:46', '08:01', '08:16', '08:36', '09:11', '09:31', '09:46', '10:01', '10:16', '10:31', '10:51', '11:11', '11:31', '11:46', '12:01', '12:16', '12:31', '12:46', '13:01', '13:16', '13:31', '13:46', '14:01', '14:16', '14:31', '14:51', '15:11', '15:31', '15:46', '16:01', '16:16', '16:31', '16:46', '17:01', '17:16', '17:26', '18:06', '18:21', '18:31', '18:46', '19:06', '19:31', '19:51', '20:11', '20:31', '20:51', '21:16', '21:46', '22:26', '23:22']},
							{station: 'Становое-2', times: ['05:13', '05:48', '06:03', '06:28', '06:53', '07:13', '07:28', '07:48', '08:03', '08:18', '08:38', '09:13', '09:33', '09:48', '10:03', '10:18', '10:33', '10:53', '11:13', '11:33', '11:48', '12:03', '12:18', '12:33', '12:48', '13:03', '13:18', '13:33', '13:48', '14:03', '14:18', '14:33', '14:53', '15:13', '15:33', '15:48', '16:03', '16:18', '16:33', '16:48', '17:03', '17:18', '17:28', '18:08', '18:23', '18:33', '18:48', '19:08', '19:33', '19:53', '20:13', '20:33', '20:53', '21:18', '21:48', '22:28', '23:23']},
							{station: 'Ивановка', times: ['05:16', '05:51', '06:06', '06:31', '06:56', '07:16', '07:31', '07:51', '08:06', '08:21', '08:41', '09:16', '09:36', '09:51', '10:06', '10:21', '10:36', '10:56', '11:16', '11:36', '11:51', '12:06', '12:21', '12:36', '12:51', '13:06', '13:21', '13:36', '13:51', '14:06', '14:21', '14:36', '14:56', '15:16', '15:36', '15:51', '16:06', '16:21', '16:36', '16:51', '17:06', '17:21', '17:31', '18:11', '18:26', '18:36', '18:51', '19:11', '19:36', '19:56', '20:16', '20:36', '20:56', '21:21', '21:51', '22:31', '23:26']},
							{station: 'Дурниха', times: ['05:18', '05:53', '06:08', '06:33', '06:58', '07:18', '07:33', '07:53', '08:08', '08:23', '08:43', '09:18', '09:38', '09:53', '10:08', '10:23', '10:38', '10:58', '11:18', '11:38', '11:53', '12:08', '12:23', '12:38', '12:53', '13:08', '13:23', '13:38', '13:53', '14:08', '14:23', '14:38', '14:58', '15:18', '15:38', '15:53', '16:08', '16:23', '16:38', '16:53', '17:08', '17:23', '17:33', '18:13', '18:28', '18:38', '18:53', '19:13', '19:38', '19:58', '20:18', '20:38', '20:58', '21:23', '21:53', '22:33', '23:28']},
							{station: 'Михайловская Слобода', times: ['05:26', '06:01', '06:16', '06:41', '07:06', '07:26', '07:41', '08:01', '08:16', '08:31', '08:51', '09:26', '09:46', '10:01', '10:16', '10:31', '10:46', '11:06', '11:26', '11:46', '12:01', '12:16', '12:31', '12:46', '13:01', '13:16', '13:31', '13:46', '14:01', '14:16', '14:31', '14:46', '15:06', '15:26', '15:46', '16:01', '16:16', '16:31', '16:46', '17:01', '17:16', '17:31', '17:41', '18:21', '18:36', '18:46', '19:01', '19:21', '19:46', '20:06', '20:26', '20:46', '21:06', '21:31', '22:01', '22:41', '23:36']},
							{station: 'Совхоз имени Тельмана', times: ['05:29', '06:04', '06:19', '06:44', '07:09', '07:29', '07:44', '08:04', '08:19', '08:34', '08:54', '09:29', '09:49', '10:04', '10:19', '10:34', '10:49', '11:09', '11:29', '11:49', '12:04', '12:19', '12:34', '12:49', '13:04', '13:19', '13:34', '13:49', '14:04', '14:19', '14:34', '14:49', '15:09', '15:29', '15:49', '16:04', '16:19', '16:34', '16:49', '17:04', '17:19', '17:34', '17:44', '18:24', '18:39', '18:49', '19:04', '19:24', '19:49', '20:09', '20:29', '20:49', '21:09', '21:34', '22:04', '22:44', '23:39']},
							{station: 'Чулково-1', times: ['05:30', '06:05', '06:20', '06:45', '07:10', '07:30', '07:45', '08:05', '08:20', '08:35', '08:55', '09:30', '09:50', '10:05', '10:20', '10:35', '10:50', '11:10', '11:30', '11:50', '12:05', '12:20', '12:35', '12:50', '13:05', '13:20', '13:35', '13:50', '14:05', '14:20', '14:35', '14:50', '15:10', '15:30', '15:50', '16:05', '16:20', '16:35', '16:50', '17:05', '17:20', '17:35', '17:45', '18:25', '18:40', '18:50', '19:05', '19:25', '19:50', '20:10', '20:30', '20:50', '21:10', '21:35', '22:05', '22:45', '23:40']},
							{station: 'Чулково-2', times: ['05:31', '06:06', '06:21', '06:46', '07:11', '07:31', '07:46', '08:06', '08:21', '08:36', '08:56', '09:31', '09:51', '10:06', '10:21', '10:36', '10:51', '11:11', '11:31', '11:51', '12:06', '12:21', '12:36', '12:51', '13:06', '13:21', '13:36', '13:51', '14:06', '14:21', '14:36', '14:51', '15:11', '15:31', '15:51', '16:06', '16:21', '16:36', '16:51', '17:06', '17:21', '17:36', '17:46', '18:26', '18:41', '18:51', '19:06', '19:26', '19:51', '20:11', '20:31', '20:51', '21:11', '21:36', '22:06', '22:46', '23:41']},
							{station: 'Новые дома', times: ['05:32', '06:07', '06:22', '06:47', '07:12', '07:32', '07:47', '08:07', '08:22', '08:37', '08:57', '09:32', '09:52', '10:07', '10:22', '10:37', '10:52', '11:12', '11:32', '11:52', '12:07', '12:22', '12:37', '12:52', '13:07', '13:22', '13:37', '13:52', '14:07', '14:22', '14:37', '14:52', '15:12', '15:32', '15:52', '16:07', '16:22', '16:37', '16:52', '17:07', '17:22', '17:37', '17:47', '18:27', '18:42', '18:52', '19:07', '19:27', '19:52', '20:12', '20:32', '20:52', '21:12', '21:37', '22:07', '22:47', '23:42']},
							{station: 'Заозёрье', times: ['05:37', '06:12', '06:27', '06:52', '07:17', '07:37', '07:52', '08:12', '08:27', '08:42', '09:02', '09:37', '09:57', '10:12', '10:27', '10:42', '10:57', '11:17', '11:37', '11:57', '12:12', '12:27', '12:42', '12:57', '13:12', '13:27', '13:42', '13:57', '14:12', '14:27', '14:42', '14:57', '15:17', '15:37', '15:57', '16:12', '16:27', '16:42', '16:57', '17:12', '17:27', '17:42', '17:52', '18:32', '18:47', '18:57', '19:12', '19:32', '19:57', '20:17', '20:37', '20:57', '21:17', '21:42', '22:12', '22:52', '23:47']},
							{station: 'Сельцо', times: ['05:38', '06:13', '06:28', '06:53', '07:18', '07:38', '07:53', '08:13', '08:28', '08:43', '09:03', '09:38', '09:58', '10:13', '10:28', '10:43', '10:58', '11:18', '11:38', '11:58', '12:13', '12:28', '12:43', '12:58', '13:13', '13:28', '13:43', '13:58', '14:13', '14:28', '14:43', '14:58', '15:18', '15:38', '15:58', '16:13', '16:28', '16:43', '16:58', '17:13', '17:28', '17:43', '17:53', '18:33', '18:48', '18:58', '19:13', '19:33', '19:58', '20:18', '20:38', '20:58', '21:18', '21:43', '22:13', '22:53', '23:48']},
							{station: 'Островцы-1', times: ['05:40', '06:15', '06:30', '06:55', '07:20', '07:40', '07:55', '08:15', '08:30', '08:45', '09:05', '09:40', '10:00', '10:15', '10:30', '10:45', '11:00', '11:20', '11:40', '12:00', '12:15', '12:30', '12:45', '13:00', '13:15', '13:30', '13:45', '14:00', '14:15', '14:30', '14:45', '15:00', '15:20', '15:40', '16:00', '16:15', '16:30', '16:45', '17:00', '17:15', '17:30', '17:45', '17:55', '18:35', '18:50', '19:00', '19:15', '19:35', '20:00', '20:20', '20:40', '21:00', '21:20', '21:45', '22:15', '22:55', '23:50']},
							{station: 'Островцы-2', times: ['05:41', '06:16', '06:31', '06:56', '07:21', '07:41', '07:56', '08:16', '08:31', '08:46', '09:06', '09:41', '10:01', '10:16', '10:31', '10:46', '11:01', '11:21', '11:41', '12:01', '12:16', '12:31', '12:46', '13:01', '13:16', '13:31', '13:46', '14:01', '14:16', '14:31', '14:46', '15:01', '15:21', '15:41', '16:01', '16:16', '16:31', '16:46', '17:01', '17:16', '17:31', '17:46', '17:56', '18:36', '18:51', '19:01', '19:16', '19:36', '20:01', '20:21', '20:41', '21:01', '21:21', '21:46', '22:16', '22:56', '23:51']},
							{station: 'Островцы-3', times: ['05:43', '06:18', '06:33', '06:58', '07:23', '07:43', '07:58', '08:18', '08:33', '08:48', '09:08', '09:43', '10:03', '10:18', '10:33', '10:48', '11:03', '11:23', '11:43', '12:03', '12:18', '12:33', '12:48', '13:03', '13:18', '13:33', '13:48', '14:03', '14:18', '14:33', '14:48', '15:03', '15:23', '15:43', '16:03', '16:18', '16:33', '16:48', '17:03', '17:18', '17:33', '17:48', '17:58', '18:38', '18:53', '19:03', '19:18', '19:38', '20:03', '20:23', '20:43', '21:03', '21:23', '21:48', '22:18', '22:58', '23:53']},
							{station: 'Тепличный комбинат', times: ['05:44', '06:19', '06:34', '06:59', '07:24', '07:44', '07:59', '08:19', '08:34', '08:49', '09:09', '09:44', '10:04', '10:19', '10:34', '10:49', '11:04', '11:24', '11:44', '12:04', '12:19', '12:34', '12:49', '13:04', '13:19', '13:34', '13:49', '14:04', '14:19', '14:34', '14:49', '15:04', '15:24', '15:44', '16:04', '16:19', '16:34', '16:49', '17:04', '17:19', '17:34', '17:49', '17:59', '18:39', '18:54', '19:04', '19:19', '19:39', '20:04', '20:24', '20:44', '21:04', '21:24', '21:49', '22:19', '22:59', '23:54']},
							{station: 'Октябрьский', times: ['05:46', '06:21', '06:36', '07:01', '07:26', '07:46', '08:01', '08:21', '08:36', '08:51', '09:11', '09:46', '10:06', '10:21', '10:36', '10:51', '11:06', '11:26', '11:46', '12:06', '12:21', '12:36', '12:51', '13:06', '13:21', '13:36', '13:51', '14:06', '14:21', '14:36', '14:51', '15:06', '15:26', '15:46', '16:06', '16:21', '16:36', '16:51', '17:06', '17:21', '17:36', '17:51', '18:01', '18:41', '18:56', '19:06', '19:21', '19:41', '20:06', '20:26', '20:46', '21:06', '21:26', '21:51', '22:21', '23:01', '23:56']},
							{station: 'Текстиль-Профи', times: ['05:47', '06:22', '06:37', '07:02', '07:27', '07:47', '08:02', '08:22', '08:37', '08:52', '09:12', '09:47', '10:07', '10:22', '10:37', '10:52', '11:07', '11:27', '11:47', '12:07', '12:22', '12:37', '12:52', '13:07', '13:22', '13:37', '13:52', '14:07', '14:22', '14:37', '14:52', '15:07', '15:27', '15:47', '16:07', '16:22', '16:37', '16:52', '17:07', '17:22', '17:37', '17:52', '18:02', '18:42', '18:57', '19:07', '19:22', '19:42', '20:07', '20:27', '20:47', '21:07', '21:27', '21:52', '22:22', '23:02', '23:57']},
							{station: 'Красное знамя', times: ['05:48', '06:23', '06:38', '07:03', '07:28', '07:48', '08:03', '08:23', '08:38', '08:53', '09:13', '09:48', '10:08', '10:23', '10:38', '10:53', '11:08', '11:28', '11:48', '12:08', '12:23', '12:38', '12:53', '13:08', '13:23', '13:38', '13:53', '14:08', '14:23', '14:38', '14:53', '15:08', '15:28', '15:48', '16:08', '16:23', '16:38', '16:53', '17:08', '17:23', '17:38', '17:53', '18:03', '18:43', '18:58', '19:08', '19:23', '19:43', '20:08', '20:28', '20:48', '21:08', '21:28', '21:53', '22:23', '23:03', '23:58']},
							{station: 'Мирный', times: ['05:50', '06:25', '06:40', '07:05', '07:30', '07:50', '08:05', '08:25', '08:40', '08:55', '09:15', '09:50', '10:10', '10:25', '10:40', '10:55', '11:10', '11:30', '11:50', '12:10', '12:25', '12:40', '12:55', '13:10', '13:25', '13:40', '13:55', '14:10', '14:25', '14:40', '14:55', '15:10', '15:30', '15:50', '16:10', '16:25', '16:40', '16:55', '17:10', '17:25', '17:40', '17:55', '18:05', '18:45', '19:00', '19:10', '19:25', '19:45', '20:10', '20:30', '20:50', '21:10', '21:30', '21:55', '22:25', '23:05', '00:00']},
							{station: 'Птицефабрика Мирная', times: ['05:52', '06:27', '06:42', '07:07', '07:32', '07:52', '08:07', '08:27', '08:42', '08:57', '09:17', '09:52', '10:12', '10:27', '10:42', '10:57', '11:12', '11:32', '11:52', '12:12', '12:27', '12:42', '12:57', '13:12', '13:27', '13:42', '13:57', '14:12', '14:27', '14:42', '14:57', '15:12', '15:32', '15:52', '16:12', '16:27', '16:42', '16:57', '17:12', '17:27', '17:42', '17:57', '18:07', '18:47', '19:02', '19:12', '19:27', '19:47', '20:12', '20:32', '20:52', '21:12', '21:32', '21:57', '22:27', '23:07', '00:02']},
							{station: 'Карьер', times: ['05:58', '06:33', '06:48', '07:13', '07:38', '07:58', '08:13', '08:33', '08:48', '09:03', '09:23', '09:58', '10:18', '10:33', '10:48', '11:03', '11:18', '11:38', '11:58', '12:18', '12:33', '12:48', '13:03', '13:18', '13:33', '13:48', '14:03', '14:18', '14:33', '14:48', '15:03', '15:18', '15:38', '15:58', '16:18', '16:33', '16:48', '17:03', '17:18', '17:33', '17:48', '18:03', '18:13', '18:53', '19:08', '19:18', '19:33', '19:53', '20:18', '20:38', '20:58', '21:18', '21:38', '22:03', '22:33', '23:13', '00:08']},
							{station: 'ТЦ Реал', times: ['06:02', '06:37', '06:52', '07:17', '07:42', '08:02', '08:17', '08:37', '08:52', '09:07', '09:27', '10:02', '10:22', '10:37', '10:52', '11:07', '11:22', '11:42', '12:02', '12:22', '12:37', '12:52', '13:07', '13:22', '13:37', '13:52', '14:07', '14:22', '14:37', '14:52', '15:07', '15:22', '15:42', '16:02', '16:22', '16:37', '16:52', '17:07', '17:22', '17:37', '17:52', '18:07', '18:17', '18:57', '19:12', '19:22', '19:37', '19:57', '20:22', '20:42', '21:02', '21:22', '21:42', '22:07', '22:37', '23:17', '00:12']},
							{station: 'Метро Котельники', times: ['06:04', '06:39', '06:54', '07:19', '07:44', '08:04', '08:19', '08:39', '08:54', '09:09', '09:29', '10:04', '10:24', '10:39', '10:54', '11:09', '11:24', '11:44', '12:04', '12:24', '12:39', '12:54', '13:09', '13:24', '13:39', '13:54', '14:09', '14:24', '14:39', '14:54', '15:09', '15:24', '15:44', '16:04', '16:24', '16:39', '16:54', '17:09', '17:24', '17:39', '17:54', '18:09', '18:19', '18:59', '19:14', '19:24', '19:39', '19:59', '20:24', '20:44', '21:04', '21:24', '21:44', '22:09', '22:39', '23:19', '00:14']}

						]
                    },
					{
                        name: "до Москворечье",
						oppositeVariant: 1,
						schedule: [
							{station: 'Метро Котельники', times: ['06:10', '06:47', '07:00', '07:10', '07:20', '07:30', '07:40', '07:50', '07:55', '08:05', '08:20', '08:45', '08:55', '09:00', '09:10', '09:20', '09:40', '09:55', '10:10', '10:25', '11:00', '11:15', '11:30', '11:45', '12:00', '12:20', '12:45', '13:00', '13:15', '13:30', '13:45', '14:00', '14:15', '14:30', '14:45', '15:00', '15:15', '15:30', '15:45', '16:00', '16:20', '16:40', '17:00', '17:15', '17:30', '17:45', '18:15', '18:45', '19:15', '19:30', '19:45', '20:00', '20:30', '20:55', '21:35', '21:55', '22:45', '23:20', '00:20']},
							{station: 'ТЦ Реал', times: ['06:11', '06:48', '07:01', '07:11', '07:21', '07:31', '07:41', '07:51', '07:56', '08:06', '08:21', '08:46', '08:56', '09:01', '09:11', '09:21', '09:41', '09:56', '10:11', '10:26', '11:01', '11:16', '11:31', '11:46', '12:01', '12:21', '12:46', '13:01', '13:16', '13:31', '13:46', '14:01', '14:16', '14:31', '14:46', '15:01', '15:16', '15:31', '15:46', '16:01', '16:21', '16:41', '17:01', '17:16', '17:31', '17:46', '18:16', '18:46', '19:16', '19:31', '19:46', '20:01', '20:31', '20:56', '21:36', '21:56', '22:46', '23:21', '00:21']},
							{station: 'Карьер', times: ['06:15', '06:52', '07:05', '07:15', '07:25', '07:35', '07:45', '07:55', '08:00', '08:10', '08:25', '08:50', '09:00', '09:05', '09:15', '09:25', '09:45', '10:00', '10:15', '10:30', '11:05', '11:20', '11:35', '11:50', '12:05', '12:25', '12:50', '13:05', '13:20', '13:35', '13:50', '14:05', '14:20', '14:35', '14:50', '15:05', '15:20', '15:35', '15:50', '16:05', '16:25', '16:45', '17:05', '17:20', '17:35', '17:50', '18:20', '18:50', '19:20', '19:35', '19:50', '20:05', '20:35', '21:00', '21:40', '22:00', '22:50', '23:25', '00:25']},
							{station: 'Птицефабрика Мирная', times: ['06:22', '06:59', '07:12', '07:22', '07:32', '07:42', '07:52', '08:02', '08:07', '08:17', '08:32', '08:57', '09:07', '09:12', '09:22', '09:32', '09:52', '10:07', '10:22', '10:37', '11:12', '11:27', '11:42', '11:57', '12:12', '12:32', '12:57', '13:12', '13:27', '13:42', '13:57', '14:12', '14:27', '14:42', '14:57', '15:12', '15:27', '15:42', '15:57', '16:12', '16:32', '16:52', '17:12', '17:27', '17:42', '17:57', '18:27', '18:57', '19:27', '19:42', '19:57', '20:12', '20:42', '21:07', '21:47', '22:07', '22:57', '23:32', '00:32']},
							{station: 'Мирный', times: ['06:23', '07:00', '07:13', '07:23', '07:33', '07:43', '07:53', '08:03', '08:08', '08:18', '08:33', '08:58', '09:08', '09:13', '09:23', '09:33', '09:53', '10:08', '10:23', '10:38', '11:13', '11:28', '11:43', '11:58', '12:13', '12:33', '12:58', '13:13', '13:28', '13:43', '13:58', '14:13', '14:28', '14:43', '14:58', '15:13', '15:28', '15:43', '15:58', '16:13', '16:33', '16:53', '17:13', '17:28', '17:43', '17:58', '18:28', '18:58', '19:28', '19:43', '19:58', '20:13', '20:43', '21:08', '21:48', '22:08', '22:58', '23:33', '00:33']},
							{station: 'Красное знамя', times: ['06:25', '07:02', '07:15', '07:25', '07:35', '07:45', '07:55', '08:05', '08:10', '08:20', '08:35', '09:00', '09:10', '09:15', '09:25', '09:35', '09:55', '10:10', '10:25', '10:40', '11:15', '11:30', '11:45', '12:00', '12:15', '12:35', '13:00', '13:15', '13:30', '13:45', '14:00', '14:15', '14:30', '14:45', '15:00', '15:15', '15:30', '15:45', '16:00', '16:15', '16:35', '16:55', '17:15', '17:30', '17:45', '18:00', '18:30', '19:00', '19:30', '19:45', '20:00', '20:15', '20:45', '21:10', '21:50', '22:10', '23:00', '23:35', '00:35']},
							{station: 'Текстиль-Профи', times: ['06:26', '07:03', '07:16', '07:26', '07:36', '07:46', '07:56', '08:06', '08:11', '08:21', '08:36', '09:01', '09:11', '09:16', '09:26', '09:36', '09:56', '10:11', '10:26', '10:41', '11:16', '11:31', '11:46', '12:01', '12:16', '12:36', '13:01', '13:16', '13:31', '13:46', '14:01', '14:16', '14:31', '14:46', '15:01', '15:16', '15:31', '15:46', '16:01', '16:16', '16:36', '16:56', '17:16', '17:31', '17:46', '18:01', '18:31', '19:01', '19:31', '19:46', '20:01', '20:16', '20:46', '21:11', '21:51', '22:11', '23:01', '23:36', '00:36']},
							{station: 'Октябрьский', times: ['06:27', '07:04', '07:17', '07:27', '07:37', '07:47', '07:57', '08:07', '08:12', '08:22', '08:37', '09:02', '09:12', '09:17', '09:27', '09:37', '09:57', '10:12', '10:27', '10:42', '11:17', '11:32', '11:47', '12:02', '12:17', '12:37', '13:02', '13:17', '13:32', '13:47', '14:02', '14:17', '14:32', '14:47', '15:02', '15:17', '15:32', '15:47', '16:02', '16:17', '16:37', '16:57', '17:17', '17:32', '17:47', '18:02', '18:32', '19:02', '19:32', '19:47', '20:02', '20:17', '20:47', '21:12', '21:52', '22:12', '23:02', '23:37', '00:37']},
							{station: 'Тепличный комбинат', times: ['06:29', '07:06', '07:19', '07:29', '07:39', '07:49', '07:59', '08:09', '08:14', '08:24', '08:39', '09:04', '09:14', '09:19', '09:29', '09:39', '09:59', '10:14', '10:29', '10:44', '11:19', '11:34', '11:49', '12:04', '12:19', '12:39', '13:04', '13:19', '13:34', '13:49', '14:04', '14:19', '14:34', '14:49', '15:04', '15:19', '15:34', '15:49', '16:04', '16:19', '16:39', '16:59', '17:19', '17:34', '17:49', '18:04', '18:34', '19:04', '19:34', '19:49', '20:04', '20:19', '20:49', '21:14', '21:54', '22:14', '23:04', '23:39', '00:39']},
							{station: 'Островцы-3', times: ['06:30', '07:07', '07:20', '07:30', '07:40', '07:50', '08:00', '08:10', '08:15', '08:25', '08:40', '09:05', '09:15', '09:20', '09:30', '09:40', '10:00', '10:15', '10:30', '10:45', '11:20', '11:35', '11:50', '12:05', '12:20', '12:40', '13:05', '13:20', '13:35', '13:50', '14:05', '14:20', '14:35', '14:50', '15:05', '15:20', '15:35', '15:50', '16:05', '16:20', '16:40', '17:00', '17:20', '17:35', '17:50', '18:05', '18:35', '19:05', '19:35', '19:50', '20:05', '20:20', '20:50', '21:15', '21:55', '22:15', '23:05', '23:40', '00:40']},
							{station: 'Островцы-2', times: ['06:32', '07:09', '07:22', '07:32', '07:42', '07:52', '08:02', '08:12', '08:17', '08:27', '08:42', '09:07', '09:17', '09:22', '09:32', '09:42', '10:02', '10:17', '10:32', '10:47', '11:22', '11:37', '11:52', '12:07', '12:22', '12:42', '13:07', '13:22', '13:37', '13:52', '14:07', '14:22', '14:37', '14:52', '15:07', '15:22', '15:37', '15:52', '16:07', '16:22', '16:42', '17:02', '17:22', '17:37', '17:52', '18:07', '18:37', '19:07', '19:37', '19:52', '20:07', '20:22', '20:52', '21:17', '21:57', '22:17', '23:07', '23:42', '00:42']},
							{station: 'Островцы-1', times: ['06:33', '07:10', '07:23', '07:33', '07:43', '07:53', '08:03', '08:13', '08:18', '08:28', '08:43', '09:08', '09:18', '09:23', '09:33', '09:43', '10:03', '10:18', '10:33', '10:48', '11:23', '11:38', '11:53', '12:08', '12:23', '12:43', '13:08', '13:23', '13:38', '13:53', '14:08', '14:23', '14:38', '14:53', '15:08', '15:23', '15:38', '15:53', '16:08', '16:23', '16:43', '17:03', '17:23', '17:38', '17:53', '18:08', '18:38', '19:08', '19:38', '19:53', '20:08', '20:23', '20:53', '21:18', '21:58', '22:18', '23:08', '23:43', '00:43']},
							{station: 'Сельцо', times: ['06:36', '07:13', '07:26', '07:36', '07:46', '07:56', '08:06', '08:16', '08:21', '08:31', '08:46', '09:11', '09:21', '09:26', '09:36', '09:46', '10:06', '10:21', '10:36', '10:51', '11:26', '11:41', '11:56', '12:11', '12:26', '12:46', '13:11', '13:26', '13:41', '13:56', '14:11', '14:26', '14:41', '14:56', '15:11', '15:26', '15:41', '15:56', '16:11', '16:26', '16:46', '17:06', '17:26', '17:41', '17:56', '18:11', '18:41', '19:11', '19:41', '19:56', '20:11', '20:26', '20:56', '21:21', '22:01', '22:21', '23:11', '23:46', '00:46']},
							{station: 'Заозёрье', times: ['06:37', '07:14', '07:27', '07:37', '07:47', '07:57', '08:07', '08:17', '08:22', '08:32', '08:47', '09:12', '09:22', '09:27', '09:37', '09:47', '10:07', '10:22', '10:37', '10:52', '11:27', '11:42', '11:57', '12:12', '12:27', '12:47', '13:12', '13:27', '13:42', '13:57', '14:12', '14:27', '14:42', '14:57', '15:12', '15:27', '15:42', '15:57', '16:12', '16:27', '16:47', '17:07', '17:27', '17:42', '17:57', '18:12', '18:42', '19:12', '19:42', '19:57', '20:12', '20:27', '20:57', '21:22', '22:02', '22:22', '23:12', '23:47', '00:47']},
							{station: 'Новые дома', times: ['06:39', '07:16', '07:29', '07:39', '07:49', '07:59', '08:09', '08:19', '08:24', '08:34', '08:49', '09:14', '09:24', '09:29', '09:39', '09:49', '10:09', '10:24', '10:39', '10:54', '11:29', '11:44', '11:59', '12:14', '12:29', '12:49', '13:14', '13:29', '13:44', '13:59', '14:14', '14:29', '14:44', '14:59', '15:14', '15:29', '15:44', '15:59', '16:14', '16:29', '16:49', '17:09', '17:29', '17:44', '17:59', '18:14', '18:44', '19:14', '19:44', '19:59', '20:14', '20:29', '20:59', '21:24', '22:04', '22:24', '23:14', '23:49', '00:49']},
							{station: 'Чулково-2', times: ['06:40', '07:17', '07:30', '07:40', '07:50', '08:00', '08:10', '08:20', '08:25', '08:35', '08:50', '09:15', '09:25', '09:30', '09:40', '09:50', '10:10', '10:25', '10:40', '10:55', '11:30', '11:45', '12:00', '12:15', '12:30', '12:50', '13:15', '13:30', '13:45', '14:00', '14:15', '14:30', '14:45', '15:00', '15:15', '15:30', '15:45', '16:00', '16:15', '16:30', '16:50', '17:10', '17:30', '17:45', '18:00', '18:15', '18:45', '19:15', '19:45', '20:00', '20:15', '20:30', '21:00', '21:25', '22:05', '22:25', '23:15', '23:50', '00:50']},
							{station: 'Чулково-1', times: ['06:42', '07:19', '07:32', '07:42', '07:52', '08:02', '08:12', '08:22', '08:27', '08:37', '08:52', '09:17', '09:27', '09:32', '09:42', '09:52', '10:12', '10:27', '10:42', '10:57', '11:32', '11:47', '12:02', '12:17', '12:32', '12:52', '13:17', '13:32', '13:47', '14:02', '14:17', '14:32', '14:47', '15:02', '15:17', '15:32', '15:47', '16:02', '16:17', '16:32', '16:52', '17:12', '17:32', '17:47', '18:02', '18:17', '18:47', '19:17', '19:47', '20:02', '20:17', '20:32', '21:02', '21:27', '22:07', '22:27', '23:17', '23:52', '00:52']},
							{station: 'Совхоз имени Тельмана', times: ['06:43', '07:20', '07:33', '07:43', '07:53', '08:03', '08:13', '08:23', '08:28', '08:38', '08:53', '09:18', '09:28', '09:33', '09:43', '09:53', '10:13', '10:28', '10:43', '10:58', '11:33', '11:48', '12:03', '12:18', '12:33', '12:53', '13:18', '13:33', '13:48', '14:03', '14:18', '14:33', '14:48', '15:03', '15:18', '15:33', '15:48', '16:03', '16:18', '16:33', '16:53', '17:13', '17:33', '17:48', '18:03', '18:18', '18:48', '19:18', '19:48', '20:03', '20:18', '20:33', '21:03', '21:28', '22:08', '22:28', '23:18', '23:53', '00:53']},
							{station: 'Михайловская Слобода', times: ['06:45', '07:22', '07:35', '07:45', '07:55', '08:05', '08:15', '08:25', '08:30', '08:40', '08:55', '09:20', '09:30', '09:35', '09:45', '09:55', '10:15', '10:30', '10:45', '11:00', '11:35', '11:50', '12:05', '12:20', '12:35', '12:55', '13:20', '13:35', '13:50', '14:05', '14:20', '14:35', '14:50', '15:05', '15:20', '15:35', '15:50', '16:05', '16:20', '16:35', '16:55', '17:15', '17:35', '17:50', '18:05', '18:20', '18:50', '19:20', '19:50', '20:05', '20:20', '20:35', '21:05', '21:30', '22:10', '22:30', '23:20', '23:55', '00:55']},
							{station: 'Дурниха', times: ['06:48', '07:25', '07:38', '07:48', '07:58', '08:08', '08:18', '08:28', '08:33', '08:43', '08:58', '09:23', '09:33', '09:38', '09:48', '09:58', '10:18', '10:33', '10:48', '11:03', '11:38', '11:53', '12:08', '12:23', '12:38', '12:58', '13:23', '13:38', '13:53', '14:08', '14:23', '14:38', '14:53', '15:08', '15:23', '15:38', '15:53', '16:08', '16:23', '16:38', '16:58', '17:18', '17:38', '17:53', '18:08', '18:23', '18:53', '19:23', '19:53', '20:08', '20:23', '20:38', '21:08', '21:33', '22:13', '22:33', '23:23', '23:58', '00:58']},
							{station: 'Ивановка', times: ['06:51', '07:28', '07:41', '07:51', '08:01', '08:11', '08:21', '08:31', '08:36', '08:46', '09:01', '09:26', '09:36', '09:41', '09:51', '10:01', '10:21', '10:36', '10:51', '11:06', '11:41', '11:56', '12:11', '12:26', '12:41', '13:01', '13:26', '13:41', '13:56', '14:11', '14:26', '14:41', '14:56', '15:11', '15:26', '15:41', '15:56', '16:11', '16:26', '16:41', '17:01', '17:21', '17:41', '17:56', '18:11', '18:26', '18:56', '19:26', '19:56', '20:11', '20:26', '20:41', '21:11', '21:36', '22:16', '22:36', '23:26', '00:01', '01:01']},
							{station: 'Становое-2', times: ['06:55', '07:32', '07:45', '07:55', '08:05', '08:15', '08:25', '08:35', '08:40', '08:50', '09:05', '09:30', '09:40', '09:45', '09:55', '10:05', '10:25', '10:40', '10:55', '11:10', '11:45', '12:00', '12:15', '12:30', '12:45', '13:05', '13:30', '13:45', '14:00', '14:15', '14:30', '14:45', '15:00', '15:15', '15:30', '15:45', '16:00', '16:15', '16:30', '16:45', '17:05', '17:25', '17:45', '18:00', '18:15', '18:30', '19:00', '19:30', '20:00', '20:15', '20:30', '20:45', '21:15', '21:40', '22:20', '22:40', '23:30', '00:05', '01:05']},
							{station: 'Становое-1', times: ['06:57', '07:34', '07:47', '07:57', '08:07', '08:17', '08:27', '08:37', '08:42', '08:52', '09:07', '09:32', '09:42', '09:47', '09:57', '10:07', '10:27', '10:42', '10:57', '11:12', '11:47', '12:02', '12:17', '12:32', '12:47', '13:07', '13:32', '13:47', '14:02', '14:17', '14:32', '14:47', '15:02', '15:17', '15:32', '15:47', '16:02', '16:17', '16:32', '16:47', '17:07', '17:27', '17:47', '18:02', '18:17', '18:32', '19:02', '19:32', '20:02', '20:17', '20:32', '20:47', '21:17', '21:42', '22:22', '22:42', '23:32', '00:07', '01:07']},
							{station: 'Софьино', times: ['06:59', '07:36', '07:49', '07:59', '08:09', '08:19', '08:29', '08:39', '08:44', '08:54', '09:09', '09:34', '09:44', '09:49', '09:59', '10:09', '10:29', '10:44', '10:59', '11:14', '11:49', '12:04', '12:19', '12:34', '12:49', '13:09', '13:34', '13:49', '14:04', '14:19', '14:34', '14:49', '15:04', '15:19', '15:34', '15:49', '16:04', '16:19', '16:34', '16:49', '17:09', '17:29', '17:49', '18:04', '18:19', '18:34', '19:04', '19:34', '20:04', '20:19', '20:34', '20:49', '21:19', '21:44', '22:24', '22:44', '23:34', '00:09', '01:09']},
							{station: 'Тимонино - Баня', times: ['07:02', '07:39', '07:52', '08:02', '08:12', '08:22', '08:32', '08:42', '08:47', '08:57', '09:12', '09:37', '09:47', '09:52', '10:02', '10:12', '10:32', '10:47', '11:02', '11:17', '11:52', '12:07', '12:22', '12:37', '12:52', '13:12', '13:37', '13:52', '14:07', '14:22', '14:37', '14:52', '15:07', '15:22', '15:37', '15:52', '16:07', '16:22', '16:37', '16:52', '17:12', '17:32', '17:52', '18:07', '18:22', '18:37', '19:07', '19:37', '20:07', '20:22', '20:37', '20:52', '21:22', '21:47', '22:27', '22:47', '23:37', '00:12', '01:12']},
							{station: 'Тимонино', times: ['07:03', '07:40', '07:53', '08:03', '08:13', '08:23', '08:33', '08:43', '08:48', '08:58', '09:13', '09:38', '09:48', '09:53', '10:03', '10:13', '10:33', '10:48', '11:03', '11:18', '11:53', '12:08', '12:23', '12:38', '12:53', '13:13', '13:38', '13:53', '14:08', '14:23', '14:38', '14:53', '15:08', '15:23', '15:38', '15:53', '16:08', '16:23', '16:38', '16:53', '17:13', '17:33', '17:53', '18:08', '18:23', '18:38', '19:08', '19:38', '20:08', '20:23', '20:38', '20:53', '21:23', '21:48', '22:28', '22:48', '23:38', '00:13', '01:13']},
							{station: 'Кривцы-2', times: ['07:05', '07:42', '07:55', '08:05', '08:15', '08:25', '08:35', '08:45', '08:50', '09:00', '09:15', '09:40', '09:50', '09:55', '10:05', '10:15', '10:35', '10:50', '11:05', '11:20', '11:55', '12:10', '12:25', '12:40', '12:55', '13:15', '13:40', '13:55', '14:10', '14:25', '14:40', '14:55', '15:10', '15:25', '15:40', '15:55', '16:10', '16:25', '16:40', '16:55', '17:15', '17:35', '17:55', '18:10', '18:25', '18:40', '19:10', '19:40', '20:10', '20:25', '20:40', '20:55', '21:25', '21:50', '22:30', '22:50', '23:40', '00:15', '01:15']},
							{station: 'Кривцы-1', times: ['07:06', '07:43', '07:56', '08:06', '08:16', '08:26', '08:36', '08:46', '08:51', '09:01', '09:16', '09:41', '09:51', '09:56', '10:06', '10:16', '10:36', '10:51', '11:06', '11:21', '11:56', '12:11', '12:26', '12:41', '12:56', '13:16', '13:41', '13:56', '14:11', '14:26', '14:41', '14:56', '15:11', '15:26', '15:41', '15:56', '16:11', '16:26', '16:41', '16:56', '17:16', '17:36', '17:56', '18:11', '18:26', '18:41', '19:11', '19:41', '20:11', '20:26', '20:41', '20:56', '21:26', '21:51', '22:31', '22:51', '23:41', '00:16', '01:16']},
							{station: 'Верхнее Велино', times: ['07:09', '07:46', '07:59', '08:09', '08:19', '08:29', '08:39', '08:49', '08:54', '09:04', '09:19', '09:44', '09:54', '09:59', '10:09', '10:19', '10:39', '10:54', '11:09', '11:24', '11:59', '12:14', '12:29', '12:44', '12:59', '13:19', '13:44', '13:59', '14:14', '14:29', '14:44', '14:59', '15:14', '15:29', '15:44', '15:59', '16:14', '16:29', '16:44', '16:59', '17:19', '17:39', '17:59', '18:14', '18:29', '18:44', '19:14', '19:44', '20:14', '20:29', '20:44', '20:59', '21:29', '21:54', '22:34', '22:54', '23:44', '00:19', '01:19']},
							{station: 'Нижнее Велино', times: ['07:11', '07:48', '08:01', '08:11', '08:21', '08:31', '08:41', '08:51', '08:56', '09:06', '09:21', '09:46', '09:56', '10:01', '10:11', '10:21', '10:41', '10:56', '11:11', '11:26', '12:01', '12:16', '12:31', '12:46', '13:01', '13:21', '13:46', '14:01', '14:16', '14:31', '14:46', '15:01', '15:16', '15:31', '15:46', '16:01', '16:16', '16:31', '16:46', '17:01', '17:21', '17:41', '18:01', '18:16', '18:31', '18:46', '19:16', '19:46', '20:16', '20:31', '20:46', '21:01', '21:31', '21:56', '22:36', '22:56', '23:46', '00:21', '01:21']},
							{station: 'Военная часть № 63539', times: ['07:13', '07:50', '08:03', '08:13', '08:23', '08:33', '08:43', '08:53', '08:58', '09:08', '09:23', '09:48', '09:58', '10:03', '10:13', '10:23', '10:43', '10:58', '11:13', '11:28', '12:03', '12:18', '12:33', '12:48', '13:03', '13:23', '13:48', '14:03', '14:18', '14:33', '14:48', '15:03', '15:18', '15:33', '15:48', '16:03', '16:18', '16:33', '16:48', '17:03', '17:23', '17:43', '18:03', '18:18', '18:33', '18:48', '19:18', '19:48', '20:18', '20:33', '20:48', '21:03', '21:33', '21:58', '22:38', '22:58', '23:48', '00:23', '01:23']},
							{station: 'Совхоз Бронницкий', times: ['07:15', '07:52', '08:05', '08:15', '08:25', '08:35', '08:45', '08:55', '09:00', '09:10', '09:25', '09:50', '10:00', '10:05', '10:15', '10:25', '10:45', '11:00', '11:15', '11:30', '12:05', '12:20', '12:35', '12:50', '13:05', '13:25', '13:50', '14:05', '14:20', '14:35', '14:50', '15:05', '15:20', '15:35', '15:50', '16:05', '16:20', '16:35', '16:50', '17:05', '17:25', '17:45', '18:05', '18:20', '18:35', '18:50', '19:20', '19:50', '20:20', '20:35', '20:50', '21:05', '21:35', '22:00', '22:40', '23:00', '23:50', '00:25', '01:25']},
							{station: 'Хозяйственный магазин', times: ['07:16', '07:53', '08:06', '08:16', '08:26', '08:36', '08:46', '08:56', '09:01', '09:11', '09:26', '09:51', '10:01', '10:06', '10:16', '10:26', '10:46', '11:01', '11:16', '11:31', '12:06', '12:21', '12:36', '12:51', '13:06', '13:26', '13:51', '14:06', '14:21', '14:36', '14:51', '15:06', '15:21', '15:36', '15:51', '16:06', '16:21', '16:36', '16:51', '17:06', '17:26', '17:46', '18:06', '18:21', '18:36', '18:51', '19:21', '19:51', '20:21', '20:36', '20:51', '21:06', '21:36', '22:01', '22:41', '23:01', '23:51', '00:26', '01:26']},
							{station: 'Автостанция Бронницы', times: ['07:19', '07:56', '08:09', '08:19', '08:29', '08:39', '08:49', '08:59', '09:04', '09:14', '09:29', '09:54', '10:04', '10:09', '10:19', '10:29', '10:49', '11:04', '11:19', '11:34', '12:09', '12:24', '12:39', '12:54', '13:09', '13:29', '13:54', '14:09', '14:24', '14:39', '14:54', '15:09', '15:24', '15:39', '15:54', '16:09', '16:24', '16:39', '16:54', '17:09', '17:29', '17:49', '18:09', '18:24', '18:39', '18:54', '19:24', '19:54', '20:24', '20:39', '20:54', '21:09', '21:39', '22:04', '22:44', '23:04', '23:54', '00:29', '01:29']},
							{station: 'Новые дома.', times: ['07:22', '07:59', '08:12', '08:22', '08:32', '08:42', '08:52', '09:02', '09:07', '09:17', '09:32', '09:57', '10:07', '10:12', '10:22', '10:32', '10:52', '11:07', '11:22', '11:37', '12:12', '12:27', '12:42', '12:57', '13:12', '13:32', '13:57', '14:12', '14:27', '14:42', '14:57', '15:12', '15:27', '15:42', '15:57', '16:12', '16:27', '16:42', '16:57', '17:12', '17:32', '17:52', '18:12', '18:27', '18:42', '18:57', '19:27', '19:57', '20:27', '20:42', '20:57', '21:12', '21:42', '22:07', '22:47', '23:07', '23:57', '00:32', '01:32']},
							{station: 'Москворечье', times: ['07:24', '08:01', '08:14', '08:24', '08:34', '08:44', '08:54', '09:04', '09:09', '09:19', '09:34', '09:59', '10:09', '10:14', '10:24', '10:34', '10:54', '11:09', '11:24', '11:39', '12:14', '12:29', '12:44', '12:59', '13:14', '13:34', '13:59', '14:14', '14:29', '14:44', '14:59', '15:14', '15:29', '15:44', '15:59', '16:14', '16:29', '16:44', '16:59', '17:14', '17:34', '17:54', '18:14', '18:29', '18:44', '18:59', '19:29', '19:59', '20:29', '20:44', '20:59', '21:14', '21:44', '22:09', '22:49', '23:09', '23:59', '00:34', '01:34']}
						]
                    }
                ]
            },
			'324С': {
                color: '#0000FF',
                variants: [
                    {
                        name: "до М.Котельники",
						oppositeVariant: 1,
						schedule: [
							{station: 'Москворечье', times: ['04:15', '05:05', '08:30', '10:10', '14:12', '15:52', '17:05', '18:45', '20:35']},
							{station: 'Новые дома.', times: ['04:17', '05:07', '08:32', '10:12', '14:14', '15:54', '17:07', '18:47', '20:37']},
							{station: 'Автостанция Бронницы', times: ['04:21', '05:11', '08:36', '10:16', '14:18', '15:58', '17:11', '18:51', '20:41']},
							{station: 'Хозяйственный магазин', times: ['04:24', '05:14', '08:39', '10:19', '14:21', '16:01', '17:14', '18:54', '20:44']},
							{station: 'Совхоз Бронницкий', times: ['04:26', '05:16', '08:41', '10:21', '14:23', '16:03', '17:16', '18:56', '20:46']},
							{station: 'Военная часть № 63539', times: ['04:28', '05:18', '08:43', '10:23', '14:25', '16:05', '17:18', '18:58', '20:48']},
							{station: 'Нижнее Велино', times: ['04:29', '05:19', '08:44', '10:24', '14:26', '16:06', '17:19', '18:59', '20:49']},
							{station: 'Верхнее Велино', times: ['04:32', '05:22', '08:47', '10:27', '14:29', '16:09', '17:22', '19:02', '20:52']},
							{station: 'Кривцы-1', times: ['04:34', '05:24', '08:49', '10:29', '14:31', '16:11', '17:24', '19:04', '20:54']},
							{station: 'Кривцы-2', times: ['04:35', '05:25', '08:50', '10:30', '14:32', '16:12', '17:25', '19:05', '20:55']},
							{station: 'Тимонино', times: ['04:37', '05:27', '08:52', '10:32', '14:34', '16:14', '17:27', '19:07', '20:57']},
							{station: 'Тимонино - Баня', times: ['04:39', '05:29', '08:54', '10:34', '14:36', '16:16', '17:29', '19:09', '20:59']},
							{station: 'Софьино', times: ['04:41', '05:31', '08:56', '10:36', '14:38', '16:18', '17:31', '19:11', '21:01']},
							{station: 'Софьино, 16', times: ['04:44', '05:34', '08:59', '10:39', '14:41', '16:21', '17:34', '19:14', '21:04']},
							{station: 'Магазин', times: ['04:46', '05:36', '09:01', '10:41', '14:43', '16:23', '17:36', '19:16', '21:06']},
							{station: 'Шаровка', times: ['04:48', '05:38', '09:03', '10:43', '14:45', '16:25', '17:38', '19:18', '21:08']},
							{station: 'Паткино, 55', times: ['04:52', '05:42', '09:07', '10:47', '14:49', '16:29', '17:42', '19:22', '21:12']},
							{station: 'Шилово, 24', times: ['04:54', '05:44', '09:09', '10:49', '14:51', '16:31', '17:44', '19:24', '21:14']},
							{station: 'Дурниха, 58А', times: ['04:57', '05:47', '09:12', '10:52', '14:54', '16:34', '17:47', '19:27', '21:17']},
							{station: 'Дачный массив', times: ['04:59', '05:49', '09:14', '10:54', '14:56', '16:36', '17:49', '19:29', '21:19']},
							{station: 'Михайловская Слобода', times: ['05:03', '05:53', '09:18', '10:58', '15:00', '16:40', '17:53', '19:33', '21:23']},
							{station: 'Совхоз имени Тельмана', times: ['05:05', '05:55', '09:20', '11:00', '15:02', '16:42', '17:55', '19:35', '21:25']},
							{station: 'Чулково-1', times: ['05:06', '05:56', '09:21', '11:01', '15:03', '16:43', '17:56', '19:36', '21:26']},
							{station: 'Чулково-2', times: ['05:07', '05:57', '09:22', '11:02', '15:04', '16:44', '17:57', '19:37', '21:27']},
							{station: 'Новые дома', times: ['05:09', '05:59', '09:24', '11:04', '15:06', '16:46', '17:59', '19:39', '21:29']},
							{station: 'Заозёрье', times: ['05:13', '06:03', '09:28', '11:08', '15:10', '16:50', '18:03', '19:43', '21:33']},
							{station: 'Сельцо', times: ['05:14', '06:04', '09:29', '11:09', '15:11', '16:51', '18:04', '19:44', '21:34']},
							{station: 'Островцы-1', times: ['05:16', '06:06', '09:31', '11:11', '15:13', '16:53', '18:06', '19:46', '21:36']},
							{station: 'Островцы-2', times: ['05:18', '06:08', '09:33', '11:13', '15:15', '16:55', '18:08', '19:48', '21:38']},
							{station: 'Островцы-3', times: ['05:19', '06:09', '09:34', '11:14', '15:16', '16:56', '18:09', '19:49', '21:39']},
							{station: 'Тепличный комбинат', times: ['05:21', '06:11', '09:36', '11:16', '15:18', '16:58', '18:11', '19:51', '21:41']},
							{station: 'Октябрьский', times: ['05:22', '06:12', '09:37', '11:17', '15:19', '16:59', '18:12', '19:52', '21:42']},
							{station: 'Текстиль-Профи', times: ['05:24', '06:14', '09:39', '11:19', '15:21', '17:01', '18:14', '19:54', '21:44']},
							{station: 'Красное знамя', times: ['05:24', '06:14', '09:39', '11:19', '15:21', '17:01', '18:14', '19:54', '21:44']},
							{station: 'Мирный', times: ['05:26', '06:16', '09:41', '11:21', '15:23', '17:03', '18:16', '19:56', '21:46']},
							{station: 'Птицефабрика Мирная', times: ['05:28', '06:18', '09:43', '11:23', '15:25', '17:05', '18:18', '19:58', '21:48']},
							{station: 'Карьер', times: ['05:34', '06:24', '09:49', '11:29', '15:31', '17:11', '18:24', '20:04', '21:54']},
							{station: 'ТЦ Реал', times: ['05:38', '06:28', '09:53', '11:33', '15:35', '17:15', '18:28', '20:08', '21:58']},
							{station: 'Метро Котельники', times: ['05:40', '06:30', '09:55', '11:35', '15:37', '17:17', '18:30', '20:10', '22:00']}
						]
                    },
                    {
                        name: "до Москворечье",
						oppositeVariant: 0,
                        schedule: [
							{station: 'Метро Котельники', times: ['06:05', '06:35', '10:13', '12:10', '16:10', '18:00', '20:45', '22:30']},
							{station: 'ТЦ Реал', times: ['06:06', '06:36', '10:14', '12:11', '16:11', '18:01', '20:46', '22:31']},
							{station: 'Карьер', times: ['06:10', '06:40', '10:18', '12:15', '16:15', '18:05', '20:50', '22:35']},
							{station: 'Птицефабрика Мирная', times: ['06:24', '06:54', '10:32', '12:29', '16:29', '18:19', '21:04', '22:49']},
							{station: 'Мирный', times: ['06:25', '06:55', '10:33', '12:30', '16:30', '18:20', '21:05', '22:50']},
							{station: 'Красное знамя', times: ['06:26', '06:56', '10:34', '12:31', '16:31', '18:21', '21:06', '22:51']},
							{station: 'Текстиль-Профи', times: ['06:27', '06:57', '10:35', '12:32', '16:32', '18:22', '21:07', '22:52']},
							{station: 'Октябрьский', times: ['06:28', '06:58', '10:36', '12:33', '16:33', '18:23', '21:08', '22:53']},
							{station: 'Тепличный комбинат', times: ['06:29', '06:59', '10:37', '12:34', '16:34', '18:24', '21:09', '22:54']},
							{station: 'Островцы-3', times: ['06:30', '07:00', '10:38', '12:35', '16:35', '18:25', '21:10', '22:55']},
							{station: 'Островцы-2', times: ['06:31', '07:01', '10:39', '12:36', '16:36', '18:26', '21:11', '22:56']},
							{station: 'Островцы-1', times: ['06:32', '07:02', '10:40', '12:37', '16:37', '18:27', '21:12', '22:57']},
							{station: 'Сельцо', times: ['06:33', '07:03', '10:41', '12:38', '16:38', '18:28', '21:13', '22:58']},
							{station: 'Заозёрье', times: ['06:34', '07:04', '10:42', '12:39', '16:39', '18:29', '21:14', '22:59']},
							{station: 'Новые дома', times: ['06:36', '07:06', '10:44', '12:41', '16:41', '18:31', '21:16', '23:01']},
							{station: 'Чулково-2', times: ['06:37', '07:07', '10:45', '12:42', '16:42', '18:32', '21:17', '23:02']},
							{station: 'Чулково-1', times: ['06:38', '07:08', '10:46', '12:43', '16:43', '18:33', '21:18', '23:03']},
							{station: 'Совхоз имени Тельмана', times: ['06:39', '07:09', '10:47', '12:44', '16:44', '18:34', '21:19', '23:04']},
							{station: 'Михайловская Слобода', times: ['06:40', '07:10', '10:48', '12:45', '16:45', '18:35', '21:20', '23:05']},
							{station: 'Дачный массив', times: ['06:42', '07:12', '10:50', '12:47', '16:47', '18:37', '21:22', '23:07']},
							{station: 'Поворот', times: ['06:43', '07:13', '10:51', '12:48', '16:48', '18:38', '21:23', '23:08']},
							{station: 'Дурниха, 58А', times: ['06:44', '07:14', '10:52', '12:49', '16:49', '18:39', '21:24', '23:09']},
							{station: 'Шилово, 24', times: ['06:46', '07:16', '10:54', '12:51', '16:51', '18:41', '21:26', '23:11']},
							{station: 'Паткино, 55', times: ['06:47', '07:17', '10:55', '12:52', '16:52', '18:42', '21:27', '23:12']},
							{station: 'Шаровка', times: ['06:49', '07:19', '10:57', '12:54', '16:54', '18:44', '21:29', '23:14']},
							{station: 'Магазин', times: ['06:51', '07:21', '10:59', '12:56', '16:56', '18:46', '21:31', '23:16']},
							{station: 'Софьино, 16', times: ['06:52', '07:22', '11:00', '12:57', '16:57', '18:47', '21:32', '23:17']},
							{station: 'РЦ Перекрёсток', times: ['06:53', '07:23', '11:01', '12:58', '16:58', '18:48', '21:33', '23:18']},
							{station: 'Софьино', times: ['06:54', '07:24', '11:02', '12:59', '16:59', '18:49', '21:34', '23:19']},
							{station: 'Тимонино - Баня', times: ['06:56', '07:26', '11:04', '13:01', '17:01', '18:51', '21:36', '23:21']},
							{station: 'Тимонино', times: ['06:57', '07:27', '11:05', '13:02', '17:02', '18:52', '21:37', '23:22']},
							{station: 'Кривцы-2', times: ['06:58', '07:28', '11:06', '13:03', '17:03', '18:53', '21:38', '23:23']},
							{station: 'Кривцы-1', times: ['06:59', '07:29', '11:07', '13:04', '17:04', '18:54', '21:39', '23:24']},
							{station: 'Верхнее Велино', times: ['07:00', '07:30', '11:08', '13:05', '17:05', '18:55', '21:40', '23:25']},
							{station: 'Нижнее Велино', times: ['07:02', '07:32', '11:10', '13:07', '17:07', '18:57', '21:42', '23:27']},
							{station: 'Военная часть № 63539', times: ['07:03', '07:33', '11:11', '13:08', '17:08', '18:58', '21:43', '23:28']},
							{station: 'Совхоз Бронницкий', times: ['07:04', '07:34', '11:12', '13:09', '17:09', '18:59', '21:44', '23:29']},
							{station: 'Хозяйственный магазин', times: ['07:05', '07:35', '11:13', '13:10', '17:10', '19:00', '21:45', '23:30']},
							{station: 'Автостанция Бронницы', times: ['07:07', '07:37', '11:15', '13:12', '17:12', '19:02', '21:47', '23:32']},
							{station: 'Новые дома.', times: ['07:10', '07:40', '11:18', '13:15', '17:15', '19:05', '21:50', '23:35']},
							{station: 'Москворечье', times: ['07:11', '07:41', '11:19', '13:16', '17:16', '19:06', '21:51', '23:36']}
                        ]
                    }
                ]
            },
            '414': {
                color: '#1fe037', // зеленый
                variants: [
                    {
                        name: "до МЦД Отдых",
						oppositeVariant: 1,
                        schedule: [
							{station: 'Автостанция Бронницы', times: ['05:35', '06:05', '07:50', '08:30', '10:50', '11:40', '13:55', '14:39', '16:20', '17:30', '19:30']},
							{station: 'Хозяйственный магазин', times: ['05:37', '06:07', '07:52', '08:32', '10:52', '11:42', '13:57', '14:41', '16:22', '17:32', '19:32']},
							{station: 'Совхоз Бронницкий', times: ['05:38', '06:08', '07:53', '08:33', '10:53', '11:43', '13:58', '14:42', '16:23', '17:33', '19:33']},
							{station: 'Военная часть № 63539', times: ['05:39', '06:09', '07:54', '08:34', '10:54', '11:44', '13:59', '14:43', '16:24', '17:34', '19:34']},
							{station: 'Нижнее Велино', times: ['05:41', '06:11', '07:56', '08:36', '10:56', '11:46', '14:01', '14:45', '16:26', '17:36', '19:36']},
							{station: 'Верхнее Велино', times: ['05:43', '06:13', '07:58', '08:38', '10:58', '11:48', '14:03', '14:47', '16:28', '17:38', '19:38']},
							{station: 'Кривцы-1', times: ['05:45', '06:15', '08:00', '08:40', '11:00', '11:50', '14:05', '14:49', '16:30', '17:40', '19:40']},
							{station: 'Кривцы-2', times: ['05:46', '06:16', '08:01', '08:41', '11:01', '11:51', '14:06', '14:50', '16:31', '17:41', '19:41']},
							{station: 'Тимонино', times: ['05:47', '06:17', '08:02', '08:42', '11:02', '11:52', '14:07', '14:51', '16:32', '17:42', '19:42']},
							{station: 'Тимонино - Баня', times: ['05:48', '06:18', '08:03', '08:43', '11:03', '11:53', '14:08', '14:52', '16:33', '17:43', '19:43']},
							{station: 'Софьино', times: ['05:50', '06:20', '08:05', '08:45', '11:05', '11:55', '14:10', '14:54', '16:35', '17:45', '19:45']},
							{station: 'Софьино, 16', times: ['05:52', '06:22', '08:07', '08:47', '11:07', '11:57', '14:12', '14:56', '16:37', '17:47', '19:47']},
							{station: 'Магазин', times: ['05:54', '06:24', '08:09', '08:49', '11:09', '11:59', '14:14', '14:58', '16:39', '17:49', '19:49']},
							{station: 'Шаровка', times: ['05:56', '06:26', '08:11', '08:51', '11:11', '12:01', '14:16', '15:00', '16:41', '17:51', '19:51']},
							{station: 'Паткино, 55', times: ['05:59', '06:29', '08:14', '08:54', '11:14', '12:04', '14:19', '15:03', '16:44', '17:54', '19:54']},
							{station: 'Шилово, 24', times: ['06:00', '06:30', '08:15', '08:55', '11:15', '12:05', '14:20', '15:04', '16:45', '17:55', '19:55']},
							{station: 'Дурниха, 58А', times: ['06:03', '06:33', '08:18', '08:58', '11:18', '12:08', '14:23', '15:07', '16:48', '17:58', '19:58']},
							{station: 'Дачный массив', times: ['06:04', '06:34', '08:19', '08:59', '11:19', '12:09', '14:24', '15:08', '16:49', '17:59', '19:59']},
							{station: 'Михайловская Слобода', times: ['06:07', '06:37', '08:22', '09:02', '11:22', '12:12', '14:27', '15:11', '16:52', '18:02', '20:02']},
							{station: 'Совхоз имени Тельмана', times: ['06:09', '06:39', '08:24', '09:04', '11:24', '12:14', '14:29', '15:13', '16:54', '18:04', '20:04']},
							{station: 'Чулково-1', times: ['06:10', '06:40', '08:25', '09:05', '11:25', '12:15', '14:30', '15:14', '16:55', '18:05', '20:05']},
							{station: 'Чулково-2', times: ['06:11', '06:41', '08:26', '09:06', '11:26', '12:16', '14:31', '15:15', '16:56', '18:06', '20:06']},
							{station: 'Новые дома', times: ['06:12', '06:42', '08:27', '09:07', '11:27', '12:17', '14:32', '15:16', '16:57', '18:07', '20:07']},
							{station: 'Улица Туполева', times: ['06:19', '06:49', '08:34', '09:14', '11:34', '12:24', '14:39', '15:23', '17:04', '18:14', '20:14']},
							{station: 'Площадь Громова', times: ['06:20', '06:50', '08:35', '09:15', '11:35', '12:25', '14:40', '15:24', '17:05', '18:15', '20:15']},
							{station: 'Площадь Громова', times: ['06:21', '06:51', '08:36', '09:16', '11:36', '12:26', '14:41', '15:25', '17:06', '18:16', '20:16']},
							{station: 'Улица Амет-хан Султана', times: ['06:22', '06:52', '08:37', '09:17', '11:37', '12:27', '14:42', '15:26', '17:07', '18:17', '20:17']},
							{station: 'Улица Чкалова', times: ['06:23', '06:53', '08:38', '09:18', '11:38', '12:28', '14:43', '15:27', '17:08', '18:18', '20:18']},
							{station: 'Улица Пушкина', times: ['06:25', '06:55', '08:40', '09:20', '11:40', '12:30', '14:45', '15:29', '17:10', '18:20', '20:20']},
							{station: 'Улица Семашко', times: ['06:27', '06:57', '08:42', '09:22', '11:42', '12:32', '14:47', '15:31', '17:12', '18:22', '20:22']},
							{station: 'МЦД Отдых', times: ['06:30', '07:00', '08:45', '09:25', '11:45', '12:35', '14:50', '15:34', '17:15', '18:25', '20:25']}
                        ]
                    },
                    {
                        name: "до Авт.Бронницы",
						oppositeVariant: 0,
                        schedule: [
							{station: 'МЦД Отдых', times: ['06:40', '07:10', '08:55', '09:35', '11:55', '13:30', '15:05', '15:44', '17:20', '18:50', '20:30']},
							{station: 'Школа № 8', times: ['06:41', '07:11', '08:56', '09:36', '11:56', '13:31', '15:06', '15:45', '17:21', '18:51', '20:31']},
							{station: 'Улица Жуковского', times: ['06:43', '07:13', '08:58', '09:38', '11:58', '13:33', '15:08', '15:47', '17:23', '18:53', '20:33']},
							{station: 'Больница', times: ['06:44', '07:14', '08:59', '09:39', '11:59', '13:34', '15:09', '15:48', '17:24', '18:54', '20:34']},
							{station: 'Улица Горького', times: ['06:45', '07:15', '09:00', '09:40', '12:00', '13:35', '15:10', '15:49', '17:25', '18:55', '20:35']},
							{station: 'Улица Пушкина', times: ['06:46', '07:16', '09:01', '09:41', '12:01', '13:36', '15:11', '15:50', '17:26', '18:56', '20:36']},
							{station: 'Улица Чкалова', times: ['06:48', '07:18', '09:03', '09:43', '12:03', '13:38', '15:13', '15:52', '17:28', '18:58', '20:38']},
							{station: 'Улица Амет-хан Султана', times: ['06:49', '07:19', '09:04', '09:44', '12:04', '13:39', '15:14', '15:53', '17:29', '18:59', '20:39']},
							{station: 'Площадь Громова', times: ['06:50', '07:20', '09:05', '09:45', '12:05', '13:40', '15:15', '15:54', '17:30', '19:00', '20:40']},
							{station: 'Улица Туполева', times: ['06:51', '07:21', '09:06', '09:46', '12:06', '13:41', '15:16', '15:55', '17:31', '19:01', '20:41']},
							{station: 'Новые дома', times: ['06:59', '07:29', '09:14', '09:54', '12:14', '13:49', '15:24', '16:03', '17:39', '19:09', '20:49']},
							{station: 'Чулково-2', times: ['07:00', '07:30', '09:15', '09:55', '12:15', '13:50', '15:25', '16:04', '17:40', '19:10', '20:50']},
							{station: 'Чулково-1', times: ['07:01', '07:31', '09:16', '09:56', '12:16', '13:51', '15:26', '16:05', '17:41', '19:11', '20:51']},
							{station: 'Совхоз имени Тельмана', times: ['07:03', '07:33', '09:18', '09:58', '12:18', '13:53', '15:28', '16:07', '17:43', '19:13', '20:53']},
							{station: 'Михайловская Слобода', times: ['07:04', '07:34', '09:19', '09:59', '12:19', '13:54', '15:29', '16:08', '17:44', '19:14', '20:54']},
							{station: 'Дачный массив', times: ['07:07', '07:37', '09:22', '10:02', '12:22', '13:57', '15:32', '16:11', '17:47', '19:17', '20:57']},
							{station: 'Поворот', times: ['07:07', '07:37', '09:22', '10:02', '12:22', '13:57', '15:32', '16:11', '17:47', '19:17', '20:57']},
							{station: 'Дурниха, 58А', times: ['07:09', '07:39', '09:24', '10:04', '12:24', '13:59', '15:34', '16:13', '17:49', '19:19', '20:59']},
							{station: 'Шилово, 24', times: ['07:11', '07:41', '09:26', '10:06', '12:26', '14:01', '15:36', '16:15', '17:51', '19:21', '21:01']},
							{station: 'Паткино, 55', times: ['07:13', '07:43', '09:28', '10:08', '12:28', '14:03', '15:38', '16:17', '17:53', '19:23', '21:03']},
							{station: 'Шаровка', times: ['07:15', '07:45', '09:30', '10:10', '12:30', '14:05', '15:40', '16:19', '17:55', '19:25', '21:05']},
							{station: 'Магазин', times: ['07:17', '07:47', '09:32', '10:12', '12:32', '14:07', '15:42', '16:21', '17:57', '19:27', '21:07']},
							{station: 'Софьино, 16', times: ['07:19', '07:49', '09:34', '10:14', '12:34', '14:09', '15:44', '16:23', '17:59', '19:29', '21:09']},
							{station: 'РЦ Перекрёсток', times: ['07:21', '07:51', '09:36', '10:16', '12:36', '14:11', '15:46', '16:25', '18:01', '19:31', '21:11']},
							{station: 'Софьино', times: ['07:22', '07:52', '09:37', '10:17', '12:37', '14:12', '15:47', '16:26', '18:02', '19:32', '21:12']},
							{station: 'Тимонино — Баня', times: ['07:25', '07:55', '09:40', '10:20', '12:40', '14:15', '15:50', '16:29', '18:05', '19:35', '21:15']},
							{station: 'Тимонино', times: ['07:26', '07:56', '09:41', '10:21', '12:41', '14:16', '15:51', '16:30', '18:06', '19:36', '21:16']},
							{station: 'Кривцы-2', times: ['07:27', '07:57', '09:42', '10:22', '12:42', '14:17', '15:52', '16:31', '18:07', '19:37', '21:17']},
							{station: 'Кривцы-1', times: ['07:28', '07:58', '09:43', '10:23', '12:43', '14:18', '15:53', '16:32', '18:08', '19:38', '21:18']},
							{station: 'Верхнее Велино', times: ['07:30', '08:00', '09:45', '10:25', '12:45', '14:20', '15:55', '16:34', '18:10', '19:40', '21:20']},
							{station: 'Нижнее Велино', times: ['07:32', '08:02', '09:47', '10:27', '12:47', '14:22', '15:57', '16:36', '18:12', '19:42', '21:22']},
							{station: 'Военная часть № 63539', times: ['07:33', '08:03', '09:48', '10:28', '12:48', '14:23', '15:58', '16:37', '18:13', '19:43', '21:23']},
							{station: 'Совхоз Бронницкий', times: ['07:35', '08:05', '09:50', '10:30', '12:50', '14:25', '16:00', '16:39', '18:15', '19:45', '21:25']},
							{station: 'Хозяйственный магазин', times: ['07:36', '08:06', '09:51', '10:31', '12:51', '14:26', '16:01', '16:40', '18:16', '19:46', '21:26']},
							{station: 'Автостанция Бронницы', times: ['07:38', '08:08', '09:53', '10:33', '12:53', '14:28', '16:03', '16:42', '18:18', '19:48', '21:28']}
                        ]
                    }
                ]
            },
            '558к': {
                color: '#800080', // фиолетовый
                variants: [
                    {
                        name: "до М.Котельники",
						oppositeVariant: 1,
                        schedule: [
							{station: 'Городок Тимонино', times: ['05:20', '06:20', '07:00', '08:15', '09:20', '09:40', '10:30', '11:00', '11:50', '12:30', '13:12', '14:25', '15:00', '15:40', '16:15', '17:00', '17:30', '18:30', '19:45']},
							{station: 'Бритово-1', times: ['05:22', '06:22', '07:02', '08:17', '09:22', '09:42', '10:32', '11:02', '11:52', '12:32', '13:14', '14:27', '15:02', '15:42', '16:17', '17:02', '17:32', '18:32', '19:47']},
							{station: 'Бритово', times: ['05:23', '06:23', '07:03', '08:18', '09:23', '09:43', '10:33', '11:03', '11:53', '12:33', '13:15', '14:28', '15:03', '15:43', '16:18', '17:03', '17:33', '18:33', '19:48']},
							{station: 'Софьино, 16', times: ['05:26', '06:26', '07:06', '08:21', '09:26', '09:46', '10:36', '11:06', '11:56', '12:36', '13:18', '14:31', '15:06', '15:46', '16:21', '17:06', '17:36', '18:36', '19:51']},
							{station: 'Магазин', times: ['05:28', '06:28', '07:08', '08:23', '09:28', '09:48', '10:38', '11:08', '11:58', '12:38', '13:20', '14:33', '15:08', '15:48', '16:23', '17:08', '17:38', '18:38', '19:53']},
							{station: 'Шаровка', times: ['05:30', '06:30', '07:10', '08:25', '09:30', '09:50', '10:40', '11:10', '12:00', '12:40', '13:22', '14:35', '15:10', '15:50', '16:25', '17:10', '17:40', '18:40', '19:55']},
							{station: 'Паткино, 55', times: ['05:33', '06:33', '07:13', '08:28', '09:33', '09:53', '10:43', '11:13', '12:03', '12:43', '13:25', '14:38', '15:13', '15:53', '16:28', '17:13', '17:43', '18:43', '19:58']},
							{station: 'Шилово, 24', times: ['05:35', '06:35', '07:15', '08:30', '09:35', '09:55', '10:45', '11:15', '12:05', '12:45', '13:27', '14:40', '15:15', '15:55', '16:30', '17:15', '17:45', '18:45', '20:00']},
							{station: 'Дурниха, 58А', times: ['05:39', '06:39', '07:19', '08:34', '09:39', '09:59', '10:49', '11:19', '12:09', '12:49', '13:31', '14:44', '15:19', '15:59', '16:34', '17:19', '17:49', '18:49', '20:04']},
							{station: 'Дачный массив', times: ['05:41', '06:41', '07:21', '08:36', '09:41', '10:01', '10:51', '11:21', '12:11', '12:51', '13:33', '14:46', '15:21', '16:01', '16:36', '17:21', '17:51', '18:51', '20:06']},
							{station: 'Михайловская Слобода', times: ['05:44', '06:44', '07:24', '08:39', '09:44', '10:04', '10:54', '11:24', '12:14', '12:54', '13:36', '14:49', '15:24', '16:04', '16:39', '17:24', '17:54', '18:54', '20:09']},
							{station: 'Совхоз имени Тельмана', times: ['05:46', '06:46', '07:26', '08:41', '09:46', '10:06', '10:56', '11:26', '12:16', '12:56', '13:38', '14:51', '15:26', '16:06', '16:41', '17:26', '17:56', '18:56', '20:11']},
							{station: 'Чулково-1', times: ['05:48', '06:48', '07:28', '08:43', '09:48', '10:08', '10:58', '11:28', '12:18', '12:58', '13:40', '14:53', '15:28', '16:08', '16:43', '17:28', '17:58', '18:58', '20:13']},
							{station: 'Чулково-2', times: ['05:49', '06:49', '07:29', '08:44', '09:49', '10:09', '10:59', '11:29', '12:19', '12:59', '13:41', '14:54', '15:29', '16:09', '16:44', '17:29', '17:59', '18:59', '20:14']},
							{station: 'Новые дома', times: ['05:50', '06:50', '07:30', '08:45', '09:50', '10:10', '11:00', '11:30', '12:20', '13:00', '13:42', '14:55', '15:30', '16:10', '16:45', '17:30', '18:00', '19:00', '20:15']},
							{station: 'Заозёрье', times: ['05:54', '06:54', '07:34', '08:49', '09:54', '10:14', '11:04', '11:34', '12:24', '13:04', '13:46', '14:59', '15:34', '16:14', '16:49', '17:34', '18:04', '19:04', '20:19']},
							{station: 'Сельцо', times: ['05:55', '06:55', '07:35', '08:50', '09:55', '10:15', '11:05', '11:35', '12:25', '13:05', '13:47', '15:00', '15:35', '16:15', '16:50', '17:35', '18:05', '19:05', '20:20']},
							{station: 'Островцы-1', times: ['05:57', '06:57', '07:37', '08:52', '09:57', '10:17', '11:07', '11:37', '12:27', '13:07', '13:49', '15:02', '15:37', '16:17', '16:52', '17:37', '18:07', '19:07', '20:22']},
							{station: 'Островцы-2', times: ['05:59', '06:59', '07:39', '08:54', '09:59', '10:19', '11:09', '11:39', '12:29', '13:09', '13:51', '15:04', '15:39', '16:19', '16:54', '17:39', '18:09', '19:09', '20:24']},
							{station: 'Островцы-3', times: ['06:00', '07:00', '07:40', '08:55', '10:00', '10:20', '11:10', '11:40', '12:30', '13:10', '13:52', '15:05', '15:40', '16:20', '16:55', '17:40', '18:10', '19:10', '20:25']},
							{station: 'Тепличный комбинат', times: ['06:02', '07:02', '07:42', '08:57', '10:02', '10:22', '11:12', '11:42', '12:32', '13:12', '13:54', '15:07', '15:42', '16:22', '16:57', '17:42', '18:12', '19:12', '20:27']},
							{station: 'Октябрьский', times: ['06:03', '07:03', '07:43', '08:58', '10:03', '10:23', '11:13', '11:43', '12:33', '13:13', '13:55', '15:08', '15:43', '16:23', '16:58', '17:43', '18:13', '19:13', '20:28']},
							{station: 'Текстиль-Профи', times: ['06:05', '07:05', '07:45', '09:00', '10:05', '10:25', '11:15', '11:45', '12:35', '13:15', '13:57', '15:10', '15:45', '16:25', '17:00', '17:45', '18:15', '19:15', '20:30']},
							{station: 'Красное знамя', times: ['06:06', '07:06', '07:46', '09:01', '10:06', '10:26', '11:16', '11:46', '12:36', '13:16', '13:58', '15:11', '15:46', '16:26', '17:01', '17:46', '18:16', '19:16', '20:31']},
							{station: 'Кладбище', times: ['06:06', '07:06', '07:46', '09:01', '10:06', '10:26', '11:16', '11:46', '12:36', '13:16', '13:58', '15:11', '15:46', '16:26', '17:01', '17:46', '18:16', '19:16', '20:31']},
							{station: 'Мирный', times: ['06:08', '07:08', '07:48', '09:03', '10:08', '10:28', '11:18', '11:48', '12:38', '13:18', '14:00', '15:13', '15:48', '16:28', '17:03', '17:48', '18:18', '19:18', '20:33']},
							{station: 'Птицефабрика Мирная', times: ['06:09', '07:09', '07:49', '09:04', '10:09', '10:29', '11:19', '11:49', '12:39', '13:19', '14:01', '15:14', '15:49', '16:29', '17:04', '17:49', '18:19', '19:19', '20:34']},
							{station: 'Строймаркет', times: ['06:13', '07:13', '07:53', '09:08', '10:13', '10:33', '11:23', '11:53', '12:43', '13:23', '14:05', '15:18', '15:53', '16:33', '17:08', '17:53', '18:23', '19:23', '20:38']},
							{station: 'Новолюберецкое кладбище', times: ['06:15', '07:15', '07:55', '09:10', '10:15', '10:35', '11:25', '11:55', '12:45', '13:25', '14:07', '15:20', '15:55', '16:35', '17:10', '17:55', '18:25', '19:25', '20:40']},
							{station: 'АТК-19', times: ['06:17', '07:17', '07:57', '09:12', '10:17', '10:37', '11:27', '11:57', '12:47', '13:27', '14:09', '15:22', '15:57', '16:37', '17:12', '17:57', '18:27', '19:27', '20:42']},
							{station: 'Карьер', times: ['06:19', '07:19', '07:59', '09:14', '10:19', '10:39', '11:29', '11:59', '12:49', '13:29', '14:11', '15:24', '15:59', '16:39', '17:14', '17:59', '18:29', '19:29', '20:44']},
							{station: 'Карьер-2', times: ['06:21', '07:21', '08:01', '09:16', '10:21', '10:41', '11:31', '12:01', '12:51', '13:31', '14:13', '15:26', '16:01', '16:41', '17:16', '18:01', '18:31', '19:31', '20:46']},
							{station: 'ТЦ Реал', times: ['06:24', '07:24', '08:04', '09:19', '10:24', '10:44', '11:34', '12:04', '12:54', '13:34', '14:16', '15:29', '16:04', '16:44', '17:19', '18:04', '18:34', '19:34', '20:49']},
							{station: 'Метро Котельники', times: ['06:26', '07:26', '08:06', '09:21', '10:26', '10:46', '11:36', '12:06', '12:56', '13:36', '14:18', '15:31', '16:06', '16:46', '17:21', '18:06', '18:36', '19:36', '20:51']},
                        ]
                    },
                    {
                        name: "до Тимонино",
						oppositeVariant: 0,
                        schedule: [
							{station: 'Метро Котельники', times: ['06:40', '07:50', '08:40', '09:45', '10:40', '11:10', '11:55', '12:35', '13:15', '14:00', '14:45', '16:00', '16:25', '17:00', '17:40', '18:25', '19:00', '20:00', '21:30']},
							{station: 'ТЦ Реал', times: ['06:42', '07:52', '08:42', '09:47', '10:42', '11:12', '11:57', '12:37', '13:17', '14:02', '14:47', '16:02', '16:27', '17:02', '17:42', '18:27', '19:02', '20:02', '21:32']},
							{station: 'Карьер-2', times: ['06:47', '07:57', '08:47', '09:52', '10:47', '11:17', '12:02', '12:42', '13:22', '14:07', '14:52', '16:07', '16:32', '17:07', '17:47', '18:32', '19:07', '20:07', '21:37']},
							{station: 'Карьер', times: ['06:50', '08:00', '08:50', '09:55', '10:50', '11:20', '12:05', '12:45', '13:25', '14:10', '14:55', '16:10', '16:35', '17:10', '17:50', '18:35', '19:10', '20:10', '21:40']},
							{station: 'АТК-19', times: ['06:53', '08:03', '08:53', '09:58', '10:53', '11:23', '12:08', '12:48', '13:28', '14:13', '14:58', '16:13', '16:38', '17:13', '17:53', '18:38', '19:13', '20:13', '21:43']},
							{station: 'Новолюберецкое кладбище', times: ['06:56', '08:06', '08:56', '10:01', '10:56', '11:26', '12:11', '12:51', '13:31', '14:16', '15:01', '16:16', '16:41', '17:16', '17:56', '18:41', '19:16', '20:16', '21:46']},
							{station: 'Строймаркет', times: ['06:59', '08:09', '08:59', '10:04', '10:59', '11:29', '12:14', '12:54', '13:34', '14:19', '15:04', '16:19', '16:44', '17:19', '17:59', '18:44', '19:19', '20:19', '21:49']},
							{station: 'Птицефабрика Мирная', times: ['07:05', '08:15', '09:05', '10:10', '11:05', '11:35', '12:20', '13:00', '13:40', '14:25', '15:10', '16:25', '16:50', '17:25', '18:05', '18:50', '19:25', '20:25', '21:55']},
							{station: 'Мирный', times: ['07:06', '08:16', '09:06', '10:11', '11:06', '11:36', '12:21', '13:01', '13:41', '14:26', '15:11', '16:26', '16:51', '17:26', '18:06', '18:51', '19:26', '20:26', '21:56']},
							{station: 'Красное знамя', times: ['07:08', '08:18', '09:08', '10:13', '11:08', '11:38', '12:23', '13:03', '13:43', '14:28', '15:13', '16:28', '16:53', '17:28', '18:08', '18:53', '19:28', '20:28', '21:58']},
							{station: 'Текстиль-Профи', times: ['07:09', '08:19', '09:09', '10:14', '11:09', '11:39', '12:24', '13:04', '13:44', '14:29', '15:14', '16:29', '16:54', '17:29', '18:09', '18:54', '19:29', '20:29', '21:59']},
							{station: 'Октябрьский', times: ['07:10', '08:20', '09:10', '10:15', '11:10', '11:40', '12:25', '13:05', '13:45', '14:30', '15:15', '16:30', '16:55', '17:30', '18:10', '18:55', '19:30', '20:30', '22:00']},
							{station: 'Тепличный комбинат', times: ['07:12', '08:22', '09:12', '10:17', '11:12', '11:42', '12:27', '13:07', '13:47', '14:32', '15:17', '16:32', '16:57', '17:32', '18:12', '18:57', '19:32', '20:32', '22:02']},
							{station: 'Островцы-3', times: ['07:14', '08:24', '09:14', '10:19', '11:14', '11:44', '12:29', '13:09', '13:49', '14:34', '15:19', '16:34', '16:59', '17:34', '18:14', '18:59', '19:34', '20:34', '22:04']},
							{station: 'Островцы-2', times: ['07:15', '08:25', '09:15', '10:20', '11:15', '11:45', '12:30', '13:10', '13:50', '14:35', '15:20', '16:35', '17:00', '17:35', '18:15', '19:00', '19:35', '20:35', '22:05']},
							{station: 'Островцы-1', times: ['07:17', '08:27', '09:17', '10:22', '11:17', '11:47', '12:32', '13:12', '13:52', '14:37', '15:22', '16:37', '17:02', '17:37', '18:17', '19:02', '19:37', '20:37', '22:07']},
							{station: 'Сельцо', times: ['07:19', '08:29', '09:19', '10:24', '11:19', '11:49', '12:34', '13:14', '13:54', '14:39', '15:24', '16:39', '17:04', '17:39', '18:19', '19:04', '19:39', '20:39', '22:09']},
							{station: 'Заозёрье', times: ['07:20', '08:30', '09:20', '10:25', '11:20', '11:50', '12:35', '13:15', '13:55', '14:40', '15:25', '16:40', '17:05', '17:40', '18:20', '19:05', '19:40', '20:40', '22:10']},
							{station: 'Новые дома', times: ['07:23', '08:33', '09:23', '10:28', '11:23', '11:53', '12:38', '13:18', '13:58', '14:43', '15:28', '16:43', '17:08', '17:43', '18:23', '19:08', '19:43', '20:43', '22:13']},
							{station: 'Чулково-2', times: ['07:24', '08:34', '09:24', '10:29', '11:24', '11:54', '12:39', '13:19', '13:59', '14:44', '15:29', '16:44', '17:09', '17:44', '18:24', '19:09', '19:44', '20:44', '22:14']},
							{station: 'Чулково-1', times: ['07:25', '08:35', '09:25', '10:30', '11:25', '11:55', '12:40', '13:20', '14:00', '14:45', '15:30', '16:45', '17:10', '17:45', '18:25', '19:10', '19:45', '20:45', '22:15']},
							{station: 'Совхоз имени Тельмана', times: ['07:27', '08:37', '09:27', '10:32', '11:27', '11:57', '12:42', '13:22', '14:02', '14:47', '15:32', '16:47', '17:12', '17:47', '18:27', '19:12', '19:47', '20:47', '22:17']},
							{station: 'Михайловская Слобода', times: ['07:29', '08:39', '09:29', '10:34', '11:29', '11:59', '12:44', '13:24', '14:04', '14:49', '15:34', '16:49', '17:14', '17:49', '18:29', '19:14', '19:49', '20:49', '22:19']},
							{station: 'Дачный массив', times: ['07:32', '08:42', '09:32', '10:37', '11:32', '12:02', '12:47', '13:27', '14:07', '14:52', '15:37', '16:52', '17:17', '17:52', '18:32', '19:17', '19:52', '20:52', '22:22']},
							{station: 'Поворот', times: ['07:33', '08:43', '09:33', '10:38', '11:33', '12:03', '12:48', '13:28', '14:08', '14:53', '15:38', '16:53', '17:18', '17:53', '18:33', '19:18', '19:53', '20:53', '22:23']},
							{station: 'Дурниха, 58А', times: ['07:34', '08:44', '09:34', '10:39', '11:34', '12:04', '12:49', '13:29', '14:09', '14:54', '15:39', '16:54', '17:19', '17:54', '18:34', '19:19', '19:54', '20:54', '22:24']},
							{station: 'Шилово, 24', times: ['07:37', '08:47', '09:37', '10:42', '11:37', '12:07', '12:52', '13:32', '14:12', '14:57', '15:42', '16:57', '17:22', '17:57', '18:37', '19:22', '19:57', '20:57', '22:27']},
							{station: 'Паткино, 55', times: ['07:40', '08:50', '09:40', '10:45', '11:40', '12:10', '12:55', '13:35', '14:15', '15:00', '15:45', '17:00', '17:25', '18:00', '18:40', '19:25', '20:00', '21:00', '22:30']},
							{station: 'Шаровка', times: ['07:43', '08:53', '09:43', '10:48', '11:43', '12:13', '12:58', '13:38', '14:18', '15:03', '15:48', '17:03', '17:28', '18:03', '18:43', '19:28', '20:03', '21:03', '22:33']},
							{station: 'Магазин', times: ['07:45', '08:55', '09:45', '10:50', '11:45', '12:15', '13:00', '13:40', '14:20', '15:05', '15:50', '17:05', '17:30', '18:05', '18:45', '19:30', '20:05', '21:05', '22:35']},
							{station: 'Софьино, 16', times: ['07:48', '08:58', '09:48', '10:53', '11:48', '12:18', '13:03', '13:43', '14:23', '15:08', '15:53', '17:08', '17:33', '18:08', '18:48', '19:33', '20:08', '21:08', '22:38']},
							{station: 'РЦ Перекрёсток', times: ['07:50', '09:00', '09:50', '10:55', '11:50', '12:20', '13:05', '13:45', '14:25', '15:10', '15:55', '17:10', '17:35', '18:10', '18:50', '19:35', '20:10', '21:10', '22:40']},
							{station: 'Бритово-1', times: ['07:53', '09:03', '09:53', '10:58', '11:53', '12:23', '13:08', '13:48', '14:28', '15:13', '15:58', '17:13', '17:38', '18:13', '18:53', '19:38', '20:13', '21:13', '22:43']},
							{station: 'Городок Тимонино', times: ['07:56', '09:06', '09:56', '11:01', '11:56', '12:26', '13:11', '13:51', '14:31', '15:16', '16:01', '17:16', '17:41', '18:16', '18:56', '19:41', '20:16', '21:16', '22:46']}
                        ]  
                    }
                ]
            }
            // ... другие маршруты ...
        }
    };
document.addEventListener('DOMContentLoaded', function() {
    // Конфигурация viewBox
    const viewBoxConfig = {
        desktop: "100 170 1000 400",
        mobile: "0 0 450 800" 
    };

    // Основные элементы DOM
    const svg = document.querySelector('svg');
    const tooltip = document.getElementById('tooltip');
    const currentTimeElement = document.getElementById('currentTime');
    const scheduleModal = document.getElementById('scheduleModal');
    const scheduleTitle = document.getElementById('scheduleTitle');
    const scheduleData = document.getElementById('scheduleData');
	let movementInterval;
	let logicInterval;
	const MOVEMENT_INTERVAL = 500; // 0.5 сек для плавности анимации
	const LOGIC_INTERVAL = 10000;  // 10 сек для обновления логики

    // Состояние приложения
    let isMobileView = window.innerWidth < 600;
    let currentStations = isMobileView ? appData.mobileStations : appData.stations;
    let buses = [];
    let currentOpenStation = null;
    let scheduleUpdateInterval = null;
    let scheduleTables = {};
	
	// Инициализация интервалов
	function initIntervals() {
		// Очистка старых интервалов
		clearAllIntervals();
		
		// Интервал для движения автобусов (частый)
		movementInterval = setInterval(() => {
			const now = updateCurrentTime();
			buses.forEach(bus => bus.updatePosition(now));
		}, MOVEMENT_INTERVAL);
		
		// Интервал для обновления логики (редкий)
		logicInterval = setInterval(() => {
			buses = updateBusLogic(buses, getStationCoords());
			updateTerminalInfoWindows();
		}, LOGIC_INTERVAL);
	}

	// Очистка интервалов
	function clearAllIntervals() {
		if (movementInterval) clearInterval(movementInterval);
		if (logicInterval) clearInterval(logicInterval);
	}

    // Инициализация карты
	function initMap() {
		svg.setAttribute('viewBox', isMobileView ? viewBoxConfig.mobile : viewBoxConfig.desktop);
		
		const stationCoords = createStations();
		createStationConnections();
		buses = createBuses(stationCoords);
		createTerminalInfoWindows(stationCoords);
		initTooltips();
		
		updateCurrentTime();
		initIntervals(); // Только один вызов интервалов
	}


    // Обработчик ресайза
    let resizeTimer;
    window.addEventListener('resize', function() {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(function() {
            const newIsMobile = window.innerWidth < 600;
            if (newIsMobile !== isMobileView) {
                isMobileView = newIsMobile;
                rebuildMap();
            }
        }, 250);
    });

    // Полная перестройка карты
	function rebuildMap() {
		svg.setAttribute('viewBox', isMobileView ? viewBoxConfig.mobile : viewBoxConfig.desktop);
		currentStations = isMobileView ? appData.mobileStations : appData.stations;
		clearSVG();
		
		const stationCoords = createStations();
		createStationConnections();
		buses = createBuses(stationCoords);
		
		createTerminalInfoWindows(stationCoords); // Пересоздаёт окна
		initTooltips();
		initIntervals();
	}

    function clearSVG() {
        while (svg.firstChild) {
            svg.removeChild(svg.firstChild);
        }
    }

    // ========== СТАНЦИИ И СОЕДИНЕНИЯ ==========
    function createStations() {
        const stationCoordinates = {};
        
        currentStations.forEach(station => {
            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            circle.setAttribute('class', 'station');
            circle.setAttribute('cx', station.x);
            circle.setAttribute('cy', station.y);
            circle.setAttribute('r', station.r);
            circle.setAttribute('data-name', station.name);
            circle.addEventListener('click', function() {
                showStationSchedule(station.name);
            });
            svg.appendChild(circle);
            
            const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            text.setAttribute('class', 'station-text');
            text.setAttribute('x', station.x);
            text.setAttribute('y', station.y);
            text.setAttribute('transform', `rotate(${station.rot}, ${station.x}, ${station.y})`);
            text.setAttribute('dx', station.dx);
            text.setAttribute('dy', station.dy);
            text.setAttribute('text-anchor', station.ta);
            text.textContent = station.name;
            svg.appendChild(text);
            
            stationCoordinates[station.name] = { 
                x: station.x, 
                y: station.y,
                r: station.r,
                rot: station.rot,
                dx: station.dx,
                dy: station.dy,
                ta: station.ta
            };
        });
        
        return stationCoordinates;
    }

// ========== СОЕДИНИТЕЛЬНЫЕ ЛИНИИ ==========
function createStationConnections() {
    const connections = isMobileView ? 
        (appData.mobileConnections || appData.connections) : 
        appData.connections;
        
    connections.forEach(conn => {
        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        let pathData = '';
        
        conn.stations.forEach((stationName, index) => {
            const station = currentStations.find(s => s.name === stationName);
            if (station) {
                let offsetX = 0, offsetY = 0;
                
                // Смещение линий под станциями (как в оригинале)
                if (index > 0 && index < conn.stations.length - 1) {
                    const prevStation = currentStations.find(s => s.name === conn.stations[index-1]);
                    const nextStation = currentStations.find(s => s.name === conn.stations[index+1]);
                    
                    if (prevStation && nextStation) {
                        const dx = nextStation.x - prevStation.x;
                        const dy = nextStation.y - prevStation.y;
                        const length = Math.sqrt(dx * dx + dy * dy);
                        
                        // Оригинальное смещение из 764м.html
                        offsetX = (dy / length) * (conn.offset || 0);
                        offsetY = (-dx / length) * (conn.offset || 0);
                    }
                }
                
                const command = index === 0 ? 'M' : 'L';
                pathData += `${command}${station.x + offsetX},${station.y + offsetY} `;
            }
        });
        
        path.setAttribute('d', pathData.trim());
        path.setAttribute('stroke', conn.color);
        path.setAttribute('stroke-width', conn.width);
        path.setAttribute('fill', 'none');
        path.setAttribute('stroke-dasharray', conn.dasharray || '');
        path.setAttribute('class', 'connection-path');
        
        svg.insertBefore(path, svg.firstChild);
    });
}

    // ========== АВТОБУСЫ ==========
    function createBuses(stationCoords) {
        const now = new Date();
        const currentTime = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
        const newBuses = [];
        
        for (const routeId in appData.routes) {
            const route = appData.routes[routeId];
            
            for (const variant of route.variants) {
                for (let i = 0; i < variant.schedule[0].times.length; i++) {
                    const startTime = timeToSeconds(variant.schedule[0].times[i]);
                    const endTime = timeToSeconds(variant.schedule[variant.schedule.length - 1].times[i]);
                    
                    if (currentTime >= startTime - 3600 && currentTime <= endTime + 3600) {
                        const bus = new Bus(
                            `${routeId}-${i}`,
                            routeId,
                            stationCoords,
                            { variant, tripIndex: i }
                        );
                        newBuses.push(bus);
                    }
                }
            }
        }
        
        return newBuses;
    }

    class Bus {
        constructor(id, routeId, stationCoords, trip) {
            this.id = id;
            this.routeId = routeId;
            this.stationCoords = stationCoords;
            this.currentTrip = trip;
            this.createElements();
            this.initTooltip();
        }
        
        createElements() {
            this.element = document.createElementNS('http://www.w3.org/2000/svg', 'ellipse');
            this.element.setAttribute('class', 'bus');
            this.element.setAttribute('rx', '8');
            this.element.setAttribute('ry', '5');
            this.element.setAttribute('fill', appData.routes[this.routeId].color);
            svg.appendChild(this.element);
            
            this.textElement = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            this.textElement.setAttribute('class', 'bus-text');
            this.textElement.textContent = this.routeId;
            svg.appendChild(this.textElement);
            
            this.updatePosition(new Date());
        }
        
        initTooltip() {
            this.showTooltip = (e) => {
                const rect = this.element.getBoundingClientRect();
                tooltip.textContent = this.getTooltipText();
                tooltip.style.left = `${rect.left + window.scrollX + 10}px`;
                tooltip.style.top = `${rect.top + window.scrollY - 50}px`;
                tooltip.style.opacity = '1';
            };
            
            this.hideTooltip = () => {
                tooltip.style.opacity = '0';
            };
            
            this.element.addEventListener('mouseover', this.showTooltip);
            this.element.addEventListener('mouseout', this.hideTooltip);
        }
        
        updatePosition(now) {
            if (!this.currentTrip) {
                this.setPosition(-100, -100);
                return;
            }
            
            const currentTime = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
            const { variant, tripIndex } = this.currentTrip;
            const schedule = variant.schedule;
            const lastStop = schedule[schedule.length - 1];
            const lastStopTime = timeToSeconds(lastStop.times[tripIndex]);
            
            if (currentTime > lastStopTime + 60) {
                this.setPosition(-100, -100);
                return;
            }
            
            if (currentTime >= lastStopTime && currentTime < lastStopTime + 30) {
                this.moveToStop(lastStop.station);
                return;
            }
            
            for (let i = 0; i < schedule.length - 1; i++) {
                const currentStop = schedule[i];
                const nextStop = schedule[i + 1];
                
                const departTime = timeToSeconds(currentStop.times[tripIndex]) + 30;
                const arriveTime = timeToSeconds(nextStop.times[tripIndex]);
                
                if (currentTime >= departTime && currentTime < arriveTime) {
                    const progress = (currentTime - departTime) / (arriveTime - departTime);
                    this.moveBetweenStops(currentStop.station, nextStop.station, progress);
                    return;
                }
            }
            
            for (const stop of schedule) {
                const stopTime = timeToSeconds(stop.times[tripIndex]);
                if (currentTime >= stopTime && currentTime < stopTime + 30) {
                    this.moveToStop(stop.station);
                    return;
                }
            }
            
            this.setPosition(-100, -100);
        }
        
        moveBetweenStops(fromStopName, toStopName, progress) {
            const from = this.stationCoords[fromStopName];
            const to = this.stationCoords[toStopName];
            
            if (from && to) {
                const baseX = from.x + (to.x - from.x) * progress;
                const baseY = from.y + (to.y - from.y) * progress;
                
                const dirX = to.x - from.x;
                const dirY = to.y - from.y;
                const length = Math.sqrt(dirX * dirX + dirY * dirY);
                
                if (length > 0) {
                    const perpX = -dirY / length;
                    const perpY = dirX / length;
                    
                    // Убрано виляние (остается только фиксированное смещение)
                    const offsetRight = 10;
                    
                    this.setPosition(
                        baseX + perpX * offsetRight,
                        baseY + perpY * offsetRight
                    );
                } else {
                    this.setPosition(baseX, baseY);
                }
            } else {
                this.setPosition(-100, -100);
            }
        }
        
        moveToStop(stopName) {
            const coords = this.stationCoords[stopName];
            if (!coords) {
                this.setPosition(-100, -100);
                return;
            }
            
            let dirX = 0, dirY = 0;
            if (this.currentTrip) {
                const schedule = this.currentTrip.variant.schedule;
                const currentIdx = schedule.findIndex(stop => stop.station === stopName);
                
                if (currentIdx > 0) {
                    const prevStop = this.stationCoords[schedule[currentIdx - 1].station];
                    if (prevStop) {
                        dirX = coords.x - prevStop.x;
                        dirY = coords.y - prevStop.y;
                    }
                }
                else if (currentIdx < schedule.length - 1) {
                    const nextStop = this.stationCoords[schedule[currentIdx + 1].station];
                    if (nextStop) {
                        dirX = nextStop.x - coords.x;
                        dirY = nextStop.y - coords.y;
                    }
                }
            }
            
            const length = Math.sqrt(dirX * dirX + dirY * dirY);
            if (length > 0) {
                const perpX = -dirY / length;
                const perpY = dirX / length;
                this.setPosition(
                    coords.x + perpX * 10,
                    coords.y + perpY * 10
                );
            } else {
                this.setPosition(coords.x, coords.y);
            }
        }
        
        setPosition(x, y) {
            this.element.setAttribute('cx', x);
            this.element.setAttribute('cy', y);
            this.textElement.setAttribute('x', x);
            this.textElement.setAttribute('y', y);
        }
        
        getTooltipText() {
            if (!this.currentTrip) {
                return `Автобус ${this.routeId}\nНе на маршруте`;
            }
            
            const { variant, tripIndex } = this.currentTrip;
            const schedule = variant.schedule;
            const now = new Date();
            const currentTime = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
            
            const formatTime = (seconds) => {
                const h = Math.floor(seconds / 3600);
                const m = Math.floor((seconds % 3600) / 60);
                return `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}`;
            };
            
            const formatTimeLeft = (targetTime) => {
                const diff = targetTime - currentTime;
                if (diff <= 0) return "сейчас";
                const minutes = Math.ceil(diff / 60);
                return minutes <= 60 ? `${minutes} мин` : `${Math.floor(minutes/60)} ч ${minutes%60} мин`;
            };
            
            const startTime = timeToSeconds(schedule[0].times[tripIndex]);
            const endTime = timeToSeconds(schedule[schedule.length - 1].times[tripIndex]);
            const totalDuration = Math.round((endTime - startTime) / 60);
            
            let remainingTime = "?";
            if (currentTime >= startTime && currentTime <= endTime) {
                remainingTime = formatTimeLeft(endTime);
            }
            
            let tooltip = `Автобус ${this.routeId}\n${variant.name}\n`;
            tooltip += `${formatTime(startTime)} - ${formatTime(endTime)} (${totalDuration} мин)\n`;
            
            for (let i = 0; i < schedule.length - 1; i++) {
                const currentStop = schedule[i];
                const nextStop = schedule[i + 1];
                
                const departTime = timeToSeconds(currentStop.times[tripIndex]) + 30;
                const arriveTime = timeToSeconds(nextStop.times[tripIndex]);
                
                if (currentTime >= departTime && currentTime < arriveTime) {
                    tooltip += `В пути: ${currentStop.station} → ${nextStop.station}\n`;
                    tooltip += `Прибытие через: ${formatTimeLeft(arriveTime)}\n`;
                    tooltip += `До конечной: ${remainingTime}`;
                    return tooltip;
                }
            }
            
            for (const stop of schedule) {
                const stopTime = timeToSeconds(stop.times[tripIndex]);
                if (currentTime >= stopTime && currentTime < stopTime + 30) {
                    tooltip += `Остановка: ${stop.station}\n`;
                    tooltip += `Отправление через: ${formatTimeLeft(stopTime + 30)}\n`;
                    tooltip += `До конечной: ${remainingTime}`;
                    return tooltip;
                }
            }
            
            return tooltip;
        }
    }
	
	let terminalInfoWindows = [];
    // ========== ИНФО-ОКНА ОСТАНОВОК ==========
	function createTerminalInfoWindows(stationCoords) {
		// Сначала удаляем старые окна, если они есть
		removeAllTerminalInfoWindows();
		
		// Находим все конечные остановки
		const terminalStations = new Set();
		for (const routeId in appData.routes) {
			const route = appData.routes[routeId];
			for (const variant of route.variants) {
				terminalStations.add(variant.schedule[variant.schedule.length - 1].station);
			}
		}

		// Создаем новые окна для конечных остановок
		terminalStations.forEach(stationName => {
			const station = currentStations.find(s => s.name === stationName);
			if (!station) return;

			const infoWindow = document.createElement('div');
			infoWindow.className = `terminal-info ${cssFriendlyName(stationName)}`;
			
			// Сохраняем ссылку на созданное окно
			terminalInfoWindows.push(infoWindow);
			
			// Позиционирование
			//infoWindow.style.position = 'absolute';
			//infoWindow.style.left = `${station.x}px`;
			//infoWindow.style.top = `${station.y}px`;
			
			infoWindow.innerHTML = `
				<div class="terminal-title">${stationName}</div>
				<div class="terminal-content"></div>
			`;
			
			document.body.appendChild(infoWindow);
			updateTerminalInfo(stationName, infoWindow);
		});
		updateTerminalPositions();
		window.addEventListener('resize', updateTerminalPositions);
	}

	// ========== УДАЛЕНИЕ ВСЕХ ИНФОРМАЦИОННЫХ ОКОН ==========
	function removeAllTerminalInfoWindows() {
		terminalInfoWindows.forEach(window => {
			if (window && window.parentNode) {
				window.parentNode.removeChild(window);
			}
		});
		terminalInfoWindows = [];
	}
    
	function updateTerminalPositions() {
		const svgRect = svg.getBoundingClientRect();
		const viewBox = svg.viewBox.baseVal;
		const scaleX = svgRect.width / viewBox.width;
		const scaleY = svgRect.height / viewBox.height;

		// Получаем текущее положение скролла
		const scrollX = window.scrollX || window.pageXOffset;
		const scrollY = window.scrollY || window.pageYOffset;

		terminalInfoWindows.forEach(infoWindow => {
			if (!infoWindow) return;
			
			const stationName = infoWindow.querySelector('.terminal-title').textContent;
			const station = currentStations.find(s => s.name === stationName);
			if (!station) return;

			// Позиционирование с учетом масштабирования и скролла
			const x = svgRect.left + (station.x - viewBox.x) * scaleX + scrollX;
			const y = svgRect.top + (station.y - viewBox.y) * scaleY + scrollY;

			infoWindow.style.left = `${x}px`;
			infoWindow.style.top = `${y}px`;
			
		});
	}

	// Обновляем обработчик ресайза с троттлингом
	let resizeTimeout;
	window.addEventListener('resize', function() {
		clearTimeout(resizeTimeout);
		resizeTimeout = setTimeout(function() {
			updateTerminalPositions();
		}, 100);
	});

	// Добавляем обработчик скролла
	window.addEventListener('scroll', function() {
		updateTerminalPositions();
	});
    
	// Функция для обновления логики маршрутов
	function updateBusLogic(buses, stationCoords) {
		const now = new Date();
		const currentTime = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
		const updatedBuses = [];

		// 1. Фильтрация активных автобусов
		buses.forEach(bus => {
			if (!bus.currentTrip) return;

			const lastStop = bus.currentTrip.variant.schedule[bus.currentTrip.variant.schedule.length - 1];
			const endTime = timeToSeconds(lastStop.times[bus.currentTrip.tripIndex]) + 60; // +1 минута после прибытия

			if (currentTime <= endTime) {
				updatedBuses.push(bus);
			} else {
				// Удаляем элементы автобуса из DOM, если он завершил маршрут
				if (bus.element && bus.element.parentNode) {
					bus.element.parentNode.removeChild(bus.element);
				}
				if (bus.textElement && bus.textElement.parentNode) {
					bus.textElement.parentNode.removeChild(bus.textElement);
				}
			}
		});

		// 2. Добавление новых автобусов
		for (const routeId in appData.routes) {
			const route = appData.routes[routeId];
			
			for (const variant of route.variants) {
				for (let i = 0; i < variant.schedule[0].times.length; i++) {
					const startTime = timeToSeconds(variant.schedule[0].times[i]);
					
					// Проверяем, нужно ли создать новый автобус
					if (currentTime >= startTime - 300 && currentTime <= startTime + 60) { // ±5 минут от времени отправления
						const busExists = updatedBuses.some(b => 
							b.routeId === routeId && 
							b.currentTrip.variant.name === variant.name && 
							b.currentTrip.tripIndex === i
						);
						
						if (!busExists) {
							const bus = new Bus(
								`${routeId}-${variant.name}-${i}-${Date.now()}`,
								routeId,
								stationCoords,
								{ variant, tripIndex: i }
							);
							updatedBuses.push(bus);
						}
					}
				}
			}
		}

		return updatedBuses;
	}
	
    function updateTerminalInfoWindows() {
        document.querySelectorAll('.terminal-info').forEach(infoWindow => {
            const terminalName = infoWindow.querySelector('.terminal-title').textContent;
            updateTerminalInfo(terminalName, infoWindow);
        });
    }
    
    function updateTerminalInfo(terminalName, infoWindow) {
        const now = new Date();
        const currentTime = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
        const content = infoWindow.querySelector('.terminal-content');
        content.innerHTML = '';
        
        const activeDepartures = [];
        
        for (const routeId in appData.routes) {
            const route = appData.routes[routeId];
            
            for (const variant of route.variants) {
                if (variant.schedule[0].station === terminalName) {
                    for (let i = 0; i < variant.schedule[0].times.length; i++) {
                        const departTime = timeToSeconds(variant.schedule[0].times[i]);
                        
                        if (departTime >= currentTime - 300) {
                            activeDepartures.push({
                                routeId: routeId,
                                variantName: variant.name,
                                departTime: variant.schedule[0].times[i],
                                seconds: departTime
                            });
                        }
                    }
                }
            }
        }
        
        activeDepartures.sort((a, b) => a.seconds - b.seconds);
        
        activeDepartures.slice(0, 3).forEach(departure => {
            const timeLeft = Math.ceil((departure.seconds - currentTime) / 60);
            const isImminent = timeLeft <= 5 && timeLeft > 0;
            
            const item = document.createElement('div');
            item.className = `next-departure ${isImminent ? 'imminent-departure' : ''}`;
            item.innerHTML = `
                <span class="route-name" style="color:${appData.routes[departure.routeId].color}">
                    ${departure.routeId} ${departure.variantName}
                </span>: 
                ${departure.departTime} 
                ${timeLeft > 0 ? `(через ${timeLeft} мин)` : '(сейчас)'}
            `;
            content.appendChild(item);
        });
        
        if (content.children.length === 0) {
            const empty = document.createElement('div');
            empty.className = 'no-departures';
            empty.textContent = 'Сегодня рейсов больше нет';
            content.appendChild(empty);
        }
    }
    
    function cssFriendlyName(stationName) {
        return stationName.replace(/[^\wа-яА-Я]/g, '_');
    }

    // ========== РАСПИСАНИЯ ==========
 function showStationSchedule(stationName) {
    currentOpenStation = stationName;
    scheduleData.innerHTML = '';
    scheduleTables = {};
    
    // Создаем контейнеры для расписаний сначала
    const standardView = document.createElement('div');
    standardView.className = 'schedule-view active';
    standardView.id = 'standardView';
    
    const combinedView = document.createElement('div');
    combinedView.className = 'schedule-view';
    combinedView.id = 'combinedView';

    // Создаем заголовок после создания основных элементов
    const header = document.createElement('div');
    header.className = 'schedule-header';
    header.innerHTML = `
        <div class="schedule-title">Расписание: ${stationName}</div>
        <div class="schedule-switcher">
            <button class="schedule-switch-btn active" data-view="standard">По маршрутам</button>
            <button class="schedule-switch-btn" data-view="combined">Все рейсы</button>
            <button class="close-schedule-btn">&times;</button>
        </div>
    `;

    // Добавляем элементы в правильном порядке
    scheduleData.appendChild(header);
    scheduleData.appendChild(standardView);
    scheduleData.appendChild(combinedView);

    // Теперь безопасно добавляем обработчики
    const closeBtn = header.querySelector('.close-schedule-btn');
    if (closeBtn) {
        closeBtn.addEventListener('click', closeScheduleModal);
    } else {
        console.error('Кнопка закрытия не найдена');
    }

    // Обработчики переключения
    header.querySelectorAll('.schedule-switch-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const viewType = btn.dataset.view;
            switchScheduleView(viewType);
            
            if (viewType === 'combined') {
                setTimeout(() => {
                    scrollToNearestTimeInCombinedView();
                }, 100);
            }
        });
    });

    // Генерируем расписания
    renderStandardSchedule(stationName, standardView);
    renderCombinedSchedule(stationName, combinedView);
    
    // Показываем модальное окно
    scheduleModal.style.display = 'block';
    
    // Запускаем интервал обновления подсветки
    if (!scheduleUpdateInterval) {
        scheduleUpdateInterval = setInterval(updateScheduleHighlighting, 1000);
    }
}
	
	function scrollToNearestTimeInCombinedView() {
		const combinedView = document.getElementById('combinedView');
		if (!combinedView) return;

		const tbody = combinedView.querySelector('tbody');
		if (!tbody) return;

		const now = new Date();
		const currentTime = now.getHours() * 3600 + now.getMinutes() * 60;
		const rows = tbody.querySelectorAll('tr');
		let closestRow = null;
		let smallestDiff = Infinity;

		// Ищем ближайшее время в 3-м столбце (Прибытие)
		rows.forEach(row => {
			const timeCell = row.querySelector('td:nth-child(3)'); // Проверьте номер столбца!
			if (!timeCell) return;

			const timeStr = timeCell.textContent.trim();
			if (!timeStr.match(/^\d{1,2}:\d{2}$/)) return;

			const timeSec = timeToSeconds(timeStr);
			const diff = timeSec - currentTime;

			// Ближайшее будущее время (включая +1.5 минут)
			if (diff >= -90 && diff < smallestDiff) {
				smallestDiff = diff;
				closestRow = row;
			}
		});

		// Прокручиваем 
		if (closestRow) {
			closestRow.scrollIntoView({ 
				behavior: 'smooth', 
				block: 'center' 
			});
		}
	}
    
    function renderStandardSchedule(stationName, container) {
        const now = new Date();
        const currentTime = now.getHours() * 3600 + now.getMinutes() * 60;
        
        const departures = [];
        
        for (const routeId in appData.routes) {
            const route = appData.routes[routeId];
            
            for (const variant of route.variants) {
                const stopIndex = variant.schedule.findIndex(stop => stop.station === stationName);
                if (stopIndex === -1) continue;
                
                for (let i = 0; i < variant.schedule[stopIndex].times.length; i++) {
                    const time = variant.schedule[stopIndex].times[i];
                    const timeSec = timeToSeconds(time);
                    
                    departures.push({
                        routeId: routeId,
                        variant: variant,
                        time: time,
                        timeSec: timeSec,
                        tripIndex: i
                    });
                }
            }
        }
        
        departures.sort((a, b) => {			
		if (a.routeId !== b.routeId) {
				return a.routeId.localeCompare(b.routeId); // Сначала группируем по номеру маршрута (325, 463...)
			}
			if (a.variant.name !== b.variant.name) {
				return a.variant.name.localeCompare(b.variant.name); // Затем по варианту (А, Б...)
			}
            return a.timeSec - b.timeSec;
        });
        
        const grouped = {};
        departures.forEach(item => {
            const key = `${item.routeId}-${item.variant.name}`;
            if (!grouped[key]) {
                grouped[key] = {
                    route: appData.routes[item.routeId],
                    variant: item.variant,
                    items: []
                };
            }
            grouped[key].items.push(item);
        });
        
        for (const key in grouped) {
            const group = grouped[key];
            const route = group.route;
            const variant = group.variant;
            
            const routeHeader = document.createElement('h3');
            routeHeader.className = 'route-name';
            
			const currentRoute = group.route;
			const currentVariant = group.variant;
            const routeSpan = document.createElement('span');
            routeSpan.style.display = 'inline-block';
            routeSpan.style.width = '20px';
            routeSpan.style.height = '10px';
            routeSpan.style.backgroundColor = route.color;
            routeSpan.style.marginRight = '5px';
            
            const routeLink = document.createElement('span');
            routeLink.className = 'route-link';
            routeLink.textContent = `${key}`; // Используем key из группировки
            routeLink.style.cursor = 'pointer';
            routeLink.style.textDecoration = 'underline';
            routeLink.style.color = '#0066cc';
            routeLink.addEventListener('click', () => {
				const [routeId, ...variantParts] = key.split('-');
				const variantName = variantParts.join('-');
                showRouteSchedule(routeId, variantName);
            });
            
            routeHeader.appendChild(routeSpan);
            routeHeader.appendChild(routeLink);
            container.appendChild(routeHeader);
            
            const table = document.createElement('table');
            table.className = 'schedule-table';
            
            const thead = document.createElement('thead');
            thead.innerHTML = `
                <tr>
                    <th>Отправление<br>${variant.schedule[0].station}</th>
                    <th>${stationName}</th>
                    <th>Прибытие<br>${variant.schedule[variant.schedule.length - 1].station}</th>
                    <th>В пути</th>
                </tr>
            `;
            table.appendChild(thead);
            
            const tbody = document.createElement('tbody');
            
            if (!scheduleTables.standard) scheduleTables.standard = {};
            scheduleTables.standard[key] = {
                rows: [],
                times: []
            };
            
            group.items.forEach(item => {
                const row = document.createElement('tr');
                
                const departTime = variant.schedule[0].times[item.tripIndex];
                const arrivalTime = variant.schedule[variant.schedule.length - 1].times[item.tripIndex];
                const duration = calculateDuration(departTime, arrivalTime);
                
                scheduleTables.standard[key].rows.push(row);
                scheduleTables.standard[key].times.push(item.timeSec);
                
                updateRowHighlighting(row, item.timeSec, currentTime);
                
                row.innerHTML = `
                    <td>${departTime}</td>
                    <td>${item.time}</td>
                    <td>${arrivalTime}</td>
                    <td>${formatMinutes(duration)}</td>
                `;
                
                tbody.appendChild(row);
            });
            
            table.appendChild(tbody);
            container.appendChild(table);
        }
    }
    
function showRouteSchedule(routeId, variantName) {
    // Проверка наличия маршрута
    if (!appData.routes[routeId]) {
        console.error(`Маршрут ${routeId} не найден!`);
        return;
    }

    const route = appData.routes[routeId];
    const variant = route.variants.find(v => v.name === variantName) || route.variants[0];
    const now = new Date();
    const currentTime = now.getHours() * 3600 + now.getMinutes() * 60;

    // Очищаем и создаем структуру
    scheduleData.innerHTML = `
<div class="schedule-head">
    <div class="header-content">
        <h2 class="route-title">Маршрут ${route.id || routeId} ${variant.name || ''}</h2>
        <button class="back-button">← Назад</button>
    </div>
</div>
<div class="schedule-scroll-container">
    <table class="schedule-table">
        <thead></thead>
        <tbody></tbody>
    </table>
</div>
    `;

    // Обработчик кнопки "Назад"
    scheduleData.querySelector('.back-button').addEventListener('click', () => {
        if (currentOpenStation) showStationSchedule(currentOpenStation);
    });

    const table = scheduleData.querySelector('.schedule-table');
	table.classList.add('full-route');
    const thead = table.querySelector('thead');
    const tbody = table.querySelector('tbody');
    const scrollContainer = scheduleData.querySelector('.schedule-scroll-container');

    // Создаем заголовки таблицы
    const headerRow = document.createElement('tr');
    
    // Первый заголовок - "Остановка"
    const firstHeader = document.createElement('th');
    firstHeader.textContent = 'Остановка';
    headerRow.appendChild(firstHeader);

    // Заголовки с номерами рейсов
    const numTrips = variant.schedule[0].times.length;
    for (let i = 0; i < numTrips; i++) {
        const th = document.createElement('th');
        th.textContent = i + 1;
        headerRow.appendChild(th);
    }
    thead.appendChild(headerRow);

    // Заполняем таблицу данными
    variant.schedule.forEach(stop => {
        const row = document.createElement('tr');
        
        // Ячейка с названием остановки (фиксированная)
        const stopCell = document.createElement('td');
        stopCell.textContent = stop.station;
		stopCell.className = 'fixed-cell';
		
		// Подсветка, если это текущая остановка
		if (currentOpenStation && stop.station === currentOpenStation) {
			stopCell.classList.add('highlighted-stop');
		}
		
		row.appendChild(stopCell);
        
        // Ячейки с временем
        stop.times.forEach(time => {
            const timeCell = document.createElement('td');
            const timeSec = timeToSeconds(time);
            
            timeCell.textContent = time;
            timeCell.className = 'time-cell';
            
            if (timeSec < currentTime - 60) {
                timeCell.classList.add('past-time');
            } else if (timeSec <= currentTime + 300) {
                timeCell.classList.add('next-time');
            }
            
            row.appendChild(timeCell);
        });
        
        tbody.appendChild(row);
    
    // Автоматическая прокрутка к текущей остановке и времени
    if (currentOpenStation) {
        const rows = tbody.querySelectorAll('tr');
        let stopFound = false;
        
        // 1. Ищем строку с текущей остановкой
        rows.forEach(row => {
            const stopCell = row.querySelector('td:first-child');
            if (stopCell && stopCell.textContent === currentOpenStation) {
                stopFound = true;
                
                // 2. Прокрутка к строке (вертикаль)
                row.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center' // Остановка по центру экрана
                });

                // 3. Ищем ближайшее время в строке (горизонталь)
                const now = new Date();
                const currentTime = now.getHours() * 60 + now.getMinutes(); // В минутах
                const timeCells = row.querySelectorAll('.time-cell');
                
                let closestCell = null;
                let minTimeDiff = Infinity;

                timeCells.forEach(cell => {
                    const [h, m] = cell.textContent.split(':').map(Number);
                    const cellTime = h * 60 + m;
                    const diff = cellTime - currentTime;

                    // Берём ближайшее будущее время или текущее (±5 мин)
                    if (diff >= -5 && diff < minTimeDiff) {
                        minTimeDiff = diff;
                        closestCell = cell;
                    }
                });

                // 4. Прокрутка к времени (если найдено)
                if (closestCell) {
                    closestCell.scrollIntoView({
                        behavior: 'smooth',
                        block: 'nearest',
                        inline: 'center' // Время по центру горизонтали
                    });
                }
            }
        });

    }

	});

    // Функция для обновления теней при прокрутке
    function updateScrollShadows() {
        const showLeftShadow = scrollContainer.scrollLeft > 0;
        const showTopShadow = scrollContainer.scrollTop > 0;
        
        scrollContainer.classList.toggle('scrolled-left', showLeftShadow);
        scrollContainer.classList.toggle('scrolled-top', showTopShadow);
    }

    // Drag-прокрутка
    let isDragging = false;
    let startX, startY, scrollLeft, scrollTop;

    // Обработчик движения мыши
    const handleMouseMove = (e) => {
            if (!isDragging) return;
        
    const x = e.clientX || e.touches?.[0]?.clientX;
    const y = e.clientY || e.touches?.[0]?.clientY;
    
    scrollContainer.scrollLeft = scrollLeft - (x - startX) * 1;
    scrollContainer.scrollTop = scrollTop - (y - startY) * 1; 
        
        updateScrollShadows();
        e.preventDefault();
    };

    // Инициализация перетаскивания
    scrollContainer.addEventListener('mousedown', (e) => {
        isDragging = true;
        startX = e.clientX;
        startY = e.clientY;
        scrollLeft = scrollContainer.scrollLeft;
        scrollTop = scrollContainer.scrollTop;
        scrollContainer.style.cursor = 'grabbing';
        e.preventDefault();
    });

    // Отслеживание движения
    document.addEventListener('mousemove', handleMouseMove);

    // Завершение перетаскивания
    document.addEventListener('mouseup', () => {
        isDragging = false;
        scrollContainer.style.cursor = 'grab';
    });

    // Touch-события (аналогично для мобильных устройств)
    scrollContainer.addEventListener('touchstart', (e) => {
        if (e.touches.length === 1) {
            isDragging = true;
            startX = e.touches[0].clientX;
            startY = e.touches[0].clientY;
            scrollLeft = scrollContainer.scrollLeft;
            scrollTop = scrollContainer.scrollTop;
        }
    }, { passive: false });

    scrollContainer.addEventListener('touchmove', (e) => {
        if (isDragging && e.touches.length === 1) {
            scrollContainer.scrollLeft = scrollLeft - (e.touches[0].clientX - startX) * 1;
            scrollContainer.scrollTop = scrollTop - (e.touches[0].clientY - startY) * 1;
            e.preventDefault();
        }
    }, { passive: false });

    scrollContainer.addEventListener('touchend', () => {
        isDragging = false;
    });

    // Очистка при закрытии
    const cleanup = () => {
        document.removeEventListener('mousemove', handleMouseMove);
        
        scrollContainer.removeEventListener('scroll', updateScrollShadows);
        scrollContainer.removeEventListener('touchmove', handleMouseMove);
    };

    scheduleData.querySelector('.back-button').addEventListener('click', () => {
		if (currentOpenStation) showStationSchedule(currentOpenStation);
	});
    scheduleModal.addEventListener('click', (e) => {
        if (e.target === scheduleModal) cleanup();
    });
}
    
    function renderCombinedSchedule(stationName, container) {
        const now = new Date();
        const currentTime = now.getHours() * 3600 + now.getMinutes() * 60;
        const allDepartures = [];
        
        for (const routeId in appData.routes) {
            const route = appData.routes[routeId];
            
            for (const variant of route.variants) {
                const stopIndex = variant.schedule.findIndex(stop => stop.station === stationName);
                if (stopIndex === -1) continue;
                
                for (let i = 0; i < variant.schedule[stopIndex].times.length; i++) {
                    const arrivalTime = variant.schedule[stopIndex].times[i];
                    const timeSec = timeToSeconds(arrivalTime);
                    
                    const firstStop = variant.schedule[0];
                    const lastStop = variant.schedule[variant.schedule.length - 1];
                    
                    allDepartures.push({
                        routeId: routeId,
                        variantName: variant.name,
                        arrivalTime: arrivalTime,
                        timeSec: timeSec,
                        firstStopName: firstStop.station,
                        firstStopTime: firstStop.times[i],
                        lastStopName: lastStop.station,
                        lastStopTime: lastStop.times[i],
                        tripIndex: i
                    });
                }
            }
        }
        
        allDepartures.sort((a, b) => a.timeSec - b.timeSec);
        
        const table = document.createElement('table');
        table.className = 'schedule-table';
        
        const thead = document.createElement('thead');
        thead.innerHTML = `
            <tr>
                <th>Автобус</th>
                <th>Отправление</th>
                <th>Прибытие</th>
                <th>Конечная</th>
            </tr>
        `;
        table.appendChild(thead);
        
        const tbody = document.createElement('tbody');
        
        scheduleTables.combined = {
            rows: [],
            times: []
        };
        
        allDepartures.forEach(item => {
            const row = document.createElement('tr');
            
            scheduleTables.combined.rows.push(row);
            scheduleTables.combined.times.push(item.timeSec);
            
            updateRowHighlighting(row, item.timeSec, currentTime);
            
            row.innerHTML = `
                <td>${item.routeId}</td>
                <td>${item.firstStopName}<br>${item.firstStopTime}</td>
                <td>${item.arrivalTime}</td>
                <td>${item.lastStopName}<br>${item.lastStopTime}</td>
            `;
            
            tbody.appendChild(row);
        });
        table.appendChild(tbody);
        container.appendChild(table);		
    }
    
function switchScheduleView(viewType) {
    document.querySelectorAll('.schedule-switch-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.view === viewType);
    });
    
    document.querySelectorAll('.schedule-view').forEach(view => {
        view.classList.toggle('active', view.id === `${viewType}View`);
    });
}
    
function updateScheduleHighlighting() {
    const now = new Date();
    const currentTime = now.getHours() * 3600 + now.getMinutes() * 60;
    
    // Обработка стандартного и комбинированного расписания
    for (const viewType in scheduleTables) {
        if (viewType === 'standard') {
            for (const routeKey in scheduleTables.standard) {
                const routeData = scheduleTables.standard[routeKey];
                routeData.rows.forEach((row, index) => {
                    updateRowHighlighting(row, routeData.times[index], currentTime);
                });
            }
        } else {
            const combinedData = scheduleTables.combined;
            combinedData.rows.forEach((row, index) => {
                updateRowHighlighting(row, combinedData.times[index], currentTime);
            });
        }
    }

    // Добавить обработку полного маршрута
    const fullRouteTable = document.querySelector('.schedule-table.full-route');
    if (fullRouteTable) {
        const timeCells = fullRouteTable.querySelectorAll('.time-cell');
        timeCells.forEach(cell => {
            const timeStr = cell.textContent.trim();
            const timeSec = timeToSeconds(timeStr);
            cell.classList.remove('past-time', 'next-time');
            
            if (timeSec < currentTime - 60) {
                cell.classList.add('past-time');
            } else if (timeSec <= currentTime + 300) {
                cell.classList.add('next-time');
            }
        });
    }
}
    
    function updateRowHighlighting(row, timeSec, currentTime) {
        row.classList.remove('past-time', 'next-time');
        
        if (timeSec < currentTime - 60) {
            row.classList.add('past-time');
        } else if (timeSec <= currentTime + 300) {
            row.classList.add('next-time');
        }
    }
    
    function closeScheduleModal() {
        scheduleModal.style.display = 'none';
        currentOpenStation = null;
        
        if (scheduleUpdateInterval) {
            clearInterval(scheduleUpdateInterval);
            scheduleUpdateInterval = null;
        }
    }
    
    window.addEventListener('click', function(event) {
        if (event.target === scheduleModal) {
            closeScheduleModal();
        }
    });

    // ========== ВСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ ==========
    function timeToSeconds(timeStr) {
        const [h, m] = timeStr.split(':').map(Number);
        return h * 3600 + m * 60;
    }
    
    function formatMinutes(minutes) {
        if (minutes <= 59) return `${minutes} мин`;
        const hours = Math.floor(minutes / 60);
        const mins = minutes % 60;
        return `${hours}:${mins.toString().padStart(2, '0')}`;
    }
    
    function calculateDuration(startTimeStr, endTimeStr) {
        const start = timeToSeconds(startTimeStr);
        let end = timeToSeconds(endTimeStr);
        if (end < start) end += 86400;
        return Math.round((end - start) / 60);
    }
    
    function updateCurrentTime() {
        const now = new Date();
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        currentTimeElement.textContent = `${hours}:${minutes}`;
        return now;
    }
    
    function getStationCoords() {
        const coords = {};
        currentStations.forEach(station => {
            coords[station.name] = {
                x: station.x,
                y: station.y
            };
        });
        return coords;
    }
    
    function initTooltips() {
        document.querySelectorAll('.station').forEach(station => {
            station.addEventListener('mouseover', function(e) {
                const name = this.getAttribute('data-name');
                const rect = this.getBoundingClientRect();
                tooltip.textContent = name;
                tooltip.style.left = `${rect.left + window.scrollX}px`;
                tooltip.style.top = `${rect.top + window.scrollY - 30}px`;
                tooltip.style.opacity = '1';
            });
            
            station.addEventListener('mouseout', function() {
                tooltip.style.opacity = '0';
            });
        });
    }
    initMap();
});
</script>
</body>
</html>
